(this.webpackJsonpbeaterlist=this.webpackJsonpbeaterlist||[]).push([[0],{176:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),s=n(19),r=n.n(s),o=(n(88),n(18)),c=n(30),l=n(61),u=n(9),h=n.n(u),d=n(17),f=n(15),p=n(212),j=n(194),b=n(178),v=n(195),g=n(196),x=n(197),y=n(213),O=n(201),m=n(202),w=n(203),S=n(204),k=n(215),C=n(179),_=n(3);var P=Object(o.a)((function(t){var e=t.playlist,n=Object(a.useState)(!1),i=Object(f.a)(n,2),s=i[0],r=i[1],o=Object(a.useState)(!1),c=Object(f.a)(o,2),u=c[0],P=c[1],A=Object(a.useState)(!1),T=Object(f.a)(A,2),B=T[0],D=T[1],I=Object(a.useState)(!1),R=Object(f.a)(I,2),L=R[0],H=R[1],M=Object(a.useState)(!1),N=Object(f.a)(M,2),E=N[0],z=N[1],J=Object(a.useState)(""),F=Object(f.a)(J,2),G=F[0],U=F[1],V=Object(a.useState)(e.title),W=Object(f.a)(V,2),K=W[0],X=W[1],Z=Object(a.useState)(e.author),$=Object(f.a)(Z,2),q=$[0],Q=$[1];return Object(_.jsxs)(l.a,{display:"flex",flexDirection:"row",alignItems:"center",padding:"5px",children:[Object(_.jsx)(p.a,{src:e.image&&"data:image/png;"+e.image,name:e.title,size:50,onClick:function(){!function(t){var e=document.createElement("input");e.type="file",e.accept="image/*",e.multiple=!1,e.addEventListener("change",t),e.dispatchEvent(new MouseEvent("click"))}((function(t){var n="",a=new FileReader,i=t.target.files[0];a.readAsDataURL(i),a.onload=function(){n=a.result,e.image=n}}))}}),Object(_.jsx)(j.a,{margin:10,children:s?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(b.a,{value:K,width:"100px",onChange:function(t){return X(t.target.value)}})," ","-"," ",Object(_.jsx)(b.a,{value:q,width:"100px",onChange:function(t){return Q(t.target.value)}}),Object(_.jsx)(v.a,{icon:g.a,intent:"success",onClick:function(){e.title=K,e.author=q,r(!1)},marginLeft:"2px"}),Object(_.jsx)(v.a,{icon:x.a,intent:"danger",onClick:function(){X(e.title),Q(e.author),r(!1)},marginLeft:"2px"})]}):Object(_.jsxs)(_.Fragment,{children:[e.title," - ",e.author]})}),Object(_.jsxs)("div",{style:{marginLeft:"auto",marginRight:0},children:[Object(_.jsx)(y.a,{content:"Edit Title & Author",children:Object(_.jsx)(v.a,{icon:O.a,onClick:function(){return r(!s)},marginRight:"2px"})}),Object(_.jsx)(y.a,{content:"Download",children:Object(_.jsx)(v.a,{icon:m.a,marginRight:"2px",onClick:function(){return function(t){var e=t.asBplistJson(),n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(e))),n.setAttribute("download","".concat(t.title,".bplist")),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}(e)}})}),Object(_.jsx)(y.a,{content:"Delete",children:Object(_.jsx)(v.a,{icon:w.a,marginRight:"2px",onClick:function(){return P(!0)}})}),Object(_.jsx)(y.a,{content:"Add new song",children:Object(_.jsx)(v.a,{icon:S.a,marginRight:"2px",onClick:function(){return D(!0)}})})]}),Object(_.jsx)(k.a,{isShown:u,title:"Delete ".concat(e.title,"?"),onCloseComplete:function(){return P(!1)},onConfirm:function(){e.delete(),P(!1)},confirmLabel:"Confirm",intent:"danger",children:"This action is irreverisble!"}),Object(_.jsxs)(k.a,{shouldCloseOnOverlayClick:!1,isShown:B,title:"Add new song to ".concat(e.title),onCloseComplete:function(){return D(!1)},onConfirm:Object(d.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,z(!1),H(!0),t.next=5,e.addSongByKey(G);case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),z(!0),console.log(t.t0);case 11:return t.prev=11,H(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,7,11,14]])}))),confirmLabel:"Add",children:[L&&Object(_.jsx)(C.a,{}),"Add the song key you want to add here:",Object(_.jsx)(b.a,{isInvalid:E,value:G,onChange:function(t){return U(t.target.value)}})]})]})})),A=n(22),T=n(208),B=n(205),D=n(24),I=n(25),R=n(21),L=n.n(R),H=n(13),M=["cover","name","songAuthor","levelAuthor","difficulties","downloads","plays","upvotes","downvotes","rating","uploadDate","key","hash","description"],N=new(function(){function t(){Object(D.a)(this,t),this._playlistsHorizontalMode=!1,this._playlistColumnsToShow=void 0,Object(H.d)(this),this._playlistsHorizontalMode=L.a.get("playlistHorizontalMode")||!1,this._playlistColumnsToShow=L.a.get("playlistColumnsToShow")||function(){var t={};return M.forEach((function(e){return t[e]=!1})),t}()}return Object(I.a)(t,[{key:"playlistHorizontalMode",get:function(){return this._playlistsHorizontalMode},set:function(t){this._playlistsHorizontalMode=t,L.a.set("playlistHorizontalMode",this._playlistsHorizontalMode)}},{key:"playlistColumnsToShow",get:function(){return this._playlistColumnsToShow},set:function(t){this._playlistColumnsToShow=t,L.a.set("playlistColumnsToShow",this._playlistColumnsToShow)}},{key:"setPlaylistColumnToShow",value:function(t,e){this._playlistColumnsToShow[t]=e,L.a.set("playlistColumnsToShow",this._playlistColumnsToShow)}},{key:"getPlaylistColumnNamesToShow",value:function(){var t=Object.entries(this._playlistColumnsToShow).filter((function(t){var e=Object(f.a)(t,2);e[0];return e[1]})).map((function(t){var e=Object(f.a)(t,2),n=e[0];e[1];return n}));return 0===t.length?Object.keys(this._playlistColumnsToShow):t}}]),t}()),E=Object(a.createContext)(N),z=function(t){var e=t.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)},J=function(t,e){switch(t){case"difficulties":return Object.entries(e.difficulties).filter((function(t){var e=Object(f.a)(t,2);e[0];return e[1]})).map((function(t){var e=Object(f.a)(t,2),n=e[0];e[1];return n})).join(",")}if(t in e)return e[t]},F=function(t){var e={flexBasis:120,flexGrow:0,flexShrink:0};return"description"===t?e={flexBasis:600,flexGrow:0,flexShrink:0}:"cover"===t?e={flexBasis:60,flexGrow:0,flexShrink:0}:"hash"===t?e={flexBasis:300,flexGrow:0,flexShrink:0}:["downloads","plays","upvotes","downvotes","rating","key"].includes(t)&&(e={flexBasis:72,flexGrow:0,flexShrink:0}),e},G=function(t){switch(t){case"upvotes":return"\ud83d\udc4d";case"downvotes":return"\ud83d\udc4e";case"downloads":return"\ud83d\udcbe";case"plays":return"\u25b6\ufe0f";case"rating":return"\ud83d\udcaf";case"key":return"\ud83d\udd11";default:return z(t)}},U=function(t){var e=t.idx,n=t.playlistId,i=t.song,s=t.onRemoveSongClick,r=Object(a.useContext)(E).getPlaylistColumnNamesToShow();return Object(_.jsx)(c.b,{draggableId:"".concat(n,"-").concat(i.hash),index:e,children:function(t){return Object(_.jsxs)(T.a.Row,Object(A.a)(Object(A.a)(Object(A.a)({isSelectable:!0,height:42,ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:[Object(_.jsx)(T.a.Cell,{flexBasis:40,flexGrow:0,flexShrink:0,children:Object(_.jsx)(B.a,{})}),r.map((function(t){return function(t,e){return"cover"===t?Object(_.jsx)(T.a.Cell,Object(A.a)(Object(A.a)({},F(t)),{},{children:Object(_.jsx)(p.a,{src:e.coverURL,size:40})})):Object(_.jsx)(T.a.TextCell,Object(A.a)(Object(A.a)({},F(t)),{},{children:J(t,e)}),t)}(t,i)})),Object(_.jsx)(T.a.Cell,{flexBasis:35,flexGrow:0,flexShrink:0,marginRight:0,marginLeft:"auto",children:Object(_.jsx)(w.a,{onClick:function(){return s(i)}})})]}),i.hash)}},i.hash)},V=Object(o.a)((function(t){var e=t.playlist,n=Object(a.useContext)(E).getPlaylistColumnNamesToShow(),i=Object(a.useState)(null),s=Object(f.a)(i,2),r=s[0],o=s[1];return Object(_.jsxs)(T.a,{minWidth:"300px",overflowX:"scroll",children:[Object(_.jsxs)(T.a.Head,{height:42,children:[Object(_.jsx)(T.a.HeaderCell,{flexBasis:40,flexGrow:0}),n.map((function(t){return Object(_.jsx)(T.a.TextHeaderCell,Object(A.a)(Object(A.a)({},F(t)),{},{children:G(t)}),t)})),Object(_.jsx)(T.a.HeaderCell,{flexBasis:35,flexGrow:0,flexShrink:0,marginRight:0,marginLeft:"auto"})]}),Object(_.jsx)(T.a.Body,{overflow:"visible",children:Object(_.jsx)(c.c,{droppableId:e.id,children:function(t,n){return Object(_.jsxs)("div",{ref:t.innerRef,style:{minHeight:"40px"},children:[e.songs.map((function(t,n){return Object(_.jsx)(U,{idx:n,playlistId:e.id,song:t,onRemoveSongClick:function(t){return o(t)}})})),t.placeholder]})}},e.id)}),Object(_.jsx)(k.a,{isShown:!!r,title:"Delete ".concat(null===r||void 0===r?void 0:r.name," from ").concat(e.title,"?"),onCloseComplete:function(){return o(null)},onConfirm:function(){e.removeSong(r),o(null)},confirmLabel:"Confirm",intent:"danger",children:"This action is irreverisble!"})]})})),W=Object(o.a)((function(t){var e=t.playlist;return Object(_.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:20},children:[Object(_.jsx)(P,{playlist:e}),Object(_.jsx)(V,{playlist:e})]})})),K=n(51),X=n(211),Z=function(){var t=Object(d.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://beatsaver.com/api/maps/by-hash/".concat(e));case 2:return t.abrupt("return",t.sent.json());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$=function(){var t=Object(d.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://beatsaver.com/api/maps/detail/".concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=Object(d.a)(h.a.mark((function t(e){var n,a=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"hot",t.next=3,fetch("https://beatsaver.com/api/maps/".concat(n,"/").concat(e));case 3:return t.abrupt("return",t.sent.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Q=new(function(){function t(){var e=this;Object(D.a)(this,t),this._songsList=[],this.fetchSongs=function(){var t=Object(d.a)(h.a.mark((function t(n,a){var i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q(n,a);case 2:i=t.sent,console.log(i),e.songsList=i.docs;case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Object(H.d)(this)}return Object(I.a)(t,[{key:"songsList",get:function(){return this._songsList},set:function(t){this._songsList=t}}]),t}()),Y=Object(a.createContext)(Q),tt=new(function(){function t(){var e;Object(D.a)(this,t),this.songCache=null,this.songCache=null!==(e=L.a.get("songCache"))&&void 0!==e?e:{}}return Object(I.a)(t,[{key:"manualAddSongData",value:function(t){this.songCache[t.hash]=t,L.a.set("songCache",this.songCache)}},{key:"retrieveSongData",value:function(){var t=Object(d.a)(h.a.mark((function t(e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e in this.songCache){t.next=5;break}return t.next=3,Z(e);case 3:n=t.sent,this.songCache[e]=n;case 5:L.a.set("songCache",this.songCache);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"retrieveMultipleSongData",value:function(){var t=Object(d.a)(h.a.mark((function t(e){var n,a,i,s,r,o,c=this,l=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:100,a=e.filter((function(t){return!(t in c.songCache)})),console.log("getting hashes",a),i=Object(K.a)(a),t.prev=4,i.s();case 6:if((s=i.n()).done){t.next=17;break}return r=s.value,console.log("getting from beat-saver server ",r),t.next=11,Z(r);case 11:return o=t.sent,t.next=14,new Promise((function(t){return setTimeout(t,n)}));case 14:this.songCache[r]=o;case 15:t.next=6;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(4),i.e(t.t0);case 22:return t.prev=22,i.f(),t.finish(22);case 25:L.a.set("songCache",this.songCache);case 26:case"end":return t.stop()}}),t,this,[[4,19,22,25]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getSongDataByHash",value:function(t){return t in this.songCache||this.retrieveSongData(t),this.songCache[t]}}]),t}()),et=function(){function t(e){Object(D.a)(this,t),this._hash=null,this.beatSaverSongObject=void 0,this._hash=e.hash,this.beatSaverSongObject=tt.getSongDataByHash(this.hash)}return Object(I.a)(t,[{key:"hash",get:function(){return this._hash}},{key:"coverURL",get:function(){var t;return"https://beatsaver.com"+(null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.coverURL)}},{key:"name",get:function(){var t;return null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.metadata.songName}},{key:"songAuthor",get:function(){var t;return null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.metadata.songAuthorName}},{key:"levelAuthor",get:function(){var t;return null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.metadata.levelAuthorName}},{key:"difficulties",get:function(){var t;return null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.metadata.difficulties}},{key:"description",get:function(){var t;return null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.description}},{key:"downloads",get:function(){var t;return null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.stats.downloads}},{key:"plays",get:function(){var t;return null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.stats.plays}},{key:"upvotes",get:function(){var t;return null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.stats.upVotes}},{key:"downvotes",get:function(){var t;return null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.stats.downVotes}},{key:"rating",get:function(){var t,e;return Number.parseFloat(null!==(t=100*(null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.stats.rating))&&void 0!==t?t:0).toPrecision(2)}},{key:"uploadDate",get:function(){var t;return new Date(null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.uploaded).toLocaleDateString()}},{key:"key",get:function(){var t;return null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.key}},{key:"asJson",value:function(){return{hash:this.hash}}},{key:"asBplistJson",value:function(){return{hash:this.hash,levelid:"custom_level_".concat(this.hash),songName:this.beatSaverSongObject.metadata.name,levelAuthorName:this.beatSaverSongObject.metadata.levelAuthorName,difficulties:this.beatSaverSongObject.metadata.characteristics.flatMap((function(t){return Object.entries(t.difficulties).filter((function(t){var e=Object(f.a)(t,2);e[0];return null!==e[1]})).map((function(e){var n=Object(f.a)(e,2),a=n[0];n[1];return{characteristic:t.name,name:a}}))}))}}}]),t}(),nt=function(){function t(e,n){Object(D.a)(this,t),this._id=null,this._image=null,this._title="",this._author="",this._songs=[],this.store=void 0,Object(H.d)(this),this._id=e.id,this._image=e.image,this._title=e.title,this._author=e.author,this._songs=e.songs.map((function(t){return new et(t)})),this.store=n}return Object(I.a)(t,[{key:"id",get:function(){return this._id}},{key:"image",get:function(){return this._image},set:function(t){this._image=t,this.store.saveAllPlaylists()}},{key:"title",get:function(){return this._title},set:function(t){this._title=t,this.store.saveAllPlaylists()}},{key:"author",get:function(){return this._author},set:function(t){this._author=t,this.store.saveAllPlaylists()}},{key:"songs",get:function(){return this._songs},set:function(t){this._songs=t,this.store.saveAllPlaylists()}},{key:"delete",value:function(){this.store.deletePlaylist(this)}},{key:"removeSong",value:function(t){var e=this._songs.indexOf(t);this._songs.splice(e,1)}},{key:"insertSongAtIdx",value:function(t,e){this._songs.splice(e,0,t)}},{key:"addSongByKey",value:function(){var t=Object(d.a)(h.a.mark((function t(e){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$(e);case 3:return n=t.sent,t.next=6,n.json();case 6:if(a=t.sent,console.log(a),!this._songs.find((function(t){return t.hash===a.hash}))){t.next=11;break}return t.abrupt("return");case 11:tt.manualAddSongData(a),this._songs.push(new et({hash:a.hash})),this.store.saveAllPlaylists(),t.next=19;break;case 16:throw t.prev=16,t.t0=t.catch(0),t.t0;case 19:case"end":return t.stop()}}),t,this,[[0,16]])})));return function(e){return t.apply(this,arguments)}}()},{key:"addSongBySongData",value:function(){var t=Object(d.a)(h.a.mark((function t(e){var n,a,i=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:void 0,a=e.hash,void 0===n&&(n=this._songs.length),t.prev=3,!this._songs.find((function(t){return t.hash===a}))){t.next=6;break}return t.abrupt("return");case 6:tt.manualAddSongData(e),this._songs.splice(n,0,new et({hash:a})),this.store.saveAllPlaylists(),t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(3),t.t0;case 14:case"end":return t.stop()}}),t,this,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()},{key:"asJson",value:function(){return{id:this._id,image:this.image,title:this.title,author:this.author,songs:this.songs.map((function(t){return t.asJson()}))}}},{key:"asBplistJson",value:function(){return{image:this.image,playlistTitle:this.title,playlistAuthor:this.author,songs:this.songs.map((function(t){return t.asBplistJson()}))}}}]),t}(),at=new(function(){function t(){var e=this;Object(D.a)(this,t),this._playlists=[],this.addPlaylistFromBplistData=function(){var t=Object(d.a)(h.a.mark((function t(n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt.retrieveMultipleSongData(n.songs.map((function(t){return t.hash})));case 2:a=new nt({id:e.getNewId(),image:n.image,title:n.playlistTitle,author:n.playlistAuthor,songs:n.songs},e),e.appendPlaylist(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Object(H.d)(this);var n=L.a.get("playlists");if(n){var a,i=[],s=Object(K.a)(n);try{for(s.s();!(a=s.n()).done;){var r=a.value;i.push(new nt(r,this))}}catch(o){s.e(o)}finally{s.f()}this._playlists=i}}return Object(I.a)(t,[{key:"playlists",get:function(){return this._playlists}},{key:"getNewId",value:function(){for(var t=[this._playlists.map((function(t){return t.id}))],e=Object(X.a)();t.includes(e);)e=Object(X.a)();return e}},{key:"createNewPlaylist",value:function(){var t=new nt({id:this.getNewId(),image:null,title:"New Playlist",author:"Beaterlist",songs:[]},this);this.appendPlaylist(t)}},{key:"appendPlaylist",value:function(t){this._playlists.push(t),this.saveAllPlaylists()}},{key:"deletePlaylist",value:function(t){var e=this._playlists.indexOf(t);this._playlists.splice(e,1),this.saveAllPlaylists()}},{key:"movePlaylist",value:function(t,e){this._playlists.splice(this._playlists.indexOf(t),1),this._playlists.splice(e,0,t),this.saveAllPlaylists()}},{key:"saveAllPlaylists",value:function(){var t=this._playlists.map((function(t){return t.asJson()}));L.a.set("playlists",t)}}]),t}()),it=Object(a.createContext)(at),st=Object(o.a)((function(t){var e=t.userPreferences,n=t.playlistStore;return Object(_.jsx)("div",{style:{width:e.playlistHorizontalMode?"100%":"50%",height:"80vh",display:"flex",flexDirection:e.playlistHorizontalMode?"row":"column",border:"default"},children:n.playlists.map((function(t,e){return Object(_.jsx)(W,{playlistKey:"".concat(t.title,"|").concat(e),playlist:t},"".concat(t.title,"|").concat(e))}))})})),rt=function(){var t=Object(a.useContext)(E),e=Object(a.useContext)(it);return Object(_.jsx)(st,{userPreferences:t,playlistStore:e})},ot=n(38),ct=Object(o.a)((function(){var t=Object(a.useState)(0),e=Object(f.a)(t,2),n=e[0],i=(e[1],Object(a.useContext)(Y)),s=i.songsList;return Object(a.useEffect)((function(){return i.fetchSongs(n,"plays")}),[n]),Object(_.jsxs)(T.a,{width:"200px",children:[Object(_.jsx)(ot.a,{onClick:i.fetchSongs,children:"Load"}),Object(_.jsxs)(T.a.Head,{height:42,children:[Object(_.jsx)(T.a.HeaderCell,{flexBasis:40,flexGrow:0}),Object(_.jsx)(T.a.HeaderCell,{flexBasis:60,flexGrow:0,children:"Cover"})]}),Object(_.jsx)(c.c,{droppableId:"BEAT_SAVER_BROWSER",isDropDisabled:!0,children:function(t,e){return Object(_.jsxs)(T.a.Body,{display:"flex",flexDirection:"column",ref:t.innerRef,children:[s.map((function(t,e){return Object(_.jsx)(c.b,{draggableId:"browser-".concat(t.hash),index:e,children:function(e,n){return Object(_.jsx)(T.a.Row,Object(A.a)(Object(A.a)(Object(A.a)({height:40,ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(_.jsx)(T.a.TextCell,{children:t.name})}),t.hash)}},t.hash)})),t.placeholder]})}})]})})),lt=n(207),ut=n(206),ht=Object(o.a)((function(t){var e=t.onImportClick;return Object(_.jsx)(ut.a,{multiple:!0,accept:".bplist,.json",width:250,onChange:function(){var t=Object(d.a)(h.a.mark((function t(n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n),t.next=3,Promise.all(n.map(function(){var t=Object(d.a)(h.a.mark((function t(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e.name.split(".")[1],t.t1=JSON,t.next=4,e.text();case 4:return t.t2=t.sent,t.t3=t.t1.parse.call(t.t1,t.t2),t.abrupt("return",{type:t.t0,data:t.t3});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:a=t.sent,e(a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),placeholder:"Import playlist(s)"})})),dt=Object(o.a)((function(){var t=Object(a.useContext)(E),e=t.playlistHorizontalMode,n=t.playlistColumnsToShow,i=Object(a.useContext)(it);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(j.a,{children:"Playlists Config"}),Object(_.jsx)(lt.a,{label:"Horizontal Mode",checked:e,onChange:function(e){t.playlistHorizontalMode=e.target.checked}}),Object(_.jsx)(j.a,{children:"Columns To Show"}),Object.keys(t.playlistColumnsToShow).map((function(e){return Object(_.jsx)(lt.a,{label:z(e),checked:n[e],onChange:function(n){return t.setPlaylistColumnToShow(e,n.target.checked)}},e)})),Object(_.jsx)(ht,{onImportClick:function(){var t=Object(d.a)(h.a.mark((function t(e){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.map((function(t){return i.addPlaylistFromBplistData(t.data)})),t.next=3,Promise.all(n);case 3:a=t.sent,console.log(e,"plist",a,n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),Object(_.jsx)(ot.a,{onClick:function(){return i.createNewPlaylist()},children:"Add new playlist"})]})})),ft=Object(o.a)((function(){return Object(_.jsx)(l.a,{width:"100%",height:"50px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingLeft:"20px",paddingRight:"20px",paddingTop:"10px",paddingBottom:"10px",backgroundColor:"#012548",children:Object(_.jsx)(j.a,{color:"white",children:"BeaterList"})})})),pt=function(t){var e=t.destination,n=t.source;if(console.log(e,n),e&&n){var a=e.index,i=n.index;if("BEAT_SAVER_BROWSER"===n.droppableId){var s=at.playlists.find((function(t){return t.id===e.droppableId})),r=Q.songsList[n.index];return console.log("hiyaya",r.hash),s.addSongBySongData(r,a),void at.saveAllPlaylists()}if("playlists"!==n.droppableId||"playlists"!==e.droppableId){if(e.droppableId!==n.droppableId||a!==i){var o=at.playlists.find((function(t){return t.id===n.droppableId}));if(e.droppableId===n.droppableId){var c=o.songs[i];o.removeSong(c),o.insertSongAtIdx(c,a),console.log("moving within",c,i,a)}else{var l=at.playlists.find((function(t){return t.id===e.droppableId})),u=o.songs[i];o.removeSong(u),l.insertSongAtIdx(u,a)}at.saveAllPlaylists()}}else{var h=at.playlists[n.index];at.movePlaylist(h,e.index)}}},jt=Object(o.a)((function(){return Object(_.jsxs)(l.a,{width:"100%",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",border:"default",children:[Object(_.jsx)(ft,{}),Object(_.jsxs)("div",{style:{width:"100%",flexDirection:"row",display:"flex"},children:[Object(_.jsx)(l.a,{minWidth:"300px",padding:30,children:Object(_.jsx)(dt,{})}),Object(_.jsxs)(c.a,{onDragEnd:pt,children:[Object(_.jsx)(ct,{}),Object(_.jsx)(rt,{})]})]})]})})),bt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,217)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),a(t),i(t),s(t),r(t)}))};r.a.render(Object(_.jsx)(i.a.StrictMode,{children:Object(_.jsx)(it.Provider,{value:at,children:Object(_.jsx)(Y.Provider,{value:Q,children:Object(_.jsx)(E.Provider,{value:N,children:Object(_.jsx)(jt,{})})})})}),document.getElementById("root")),bt()},88:function(t,e,n){}},[[176,1,2]]]);
//# sourceMappingURL=main.302c43e6.chunk.js.map
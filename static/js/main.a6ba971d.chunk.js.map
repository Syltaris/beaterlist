{"version":3,"sources":["stores/preferences.js","components/PlaylistTable/components/Header.js","utils/string.js","sharedUtils/playlistTable.js","components/PlaylistTable/components/SongList.js","components/PlaylistTable/index.js","components/PlaylistTable/PlaylistTable.js","controllers/api.js","stores/beatSaver.js","stores/songs.js","stores/playlists.js","components/PlaylistsContainer.js","stores/audioPlayer.js","components/BeatSaverBrowser/components/PreviewSongButton.js","components/BeatSaverBrowser/constants.js","components/BeatSaverBrowser/index.js","components/BeatSaverBrowser/BeatSaverBrowser.js","components/PlaylistImporter.js","components/Sidebar.js","components/TopNavbar.js","App.js","assets/background/tile.png","controllers/dragAndDrop.js","reportWebVitals.js","index.js"],"names":["bplistSongKeys","userPreferencesStore","_playlistsHorizontalMode","_playlistColumnsToShow","undefined","_showBeatSaverBrowser","makeAutoObservable","this","store","get","output","forEach","key","initColumnsToShow","flag","set","columns","Object","entries","filter","map","length","keys","UserPreferencesContext","createContext","observer","playlist","useState","editTextData","setEditTextData","showDeleteConfirmation","setShowDeleteConfirmation","showAddDialog","setShowAddDialog","showAddSongLoader","setShowAddSongLoader","addSongError","setAddSongError","songKeyInput","setSongKeyInput","title","titleInput","setTitleInput","author","authorInput","setAuthorInput","onSongKeyAdd","a","addSongByKey","addedSongData","toaster","success","name","mixpanel","track","event_category","event_label","danger","message","Pane","display","flexDirection","alignItems","paddingBottom","Avatar","src","image","size","onClick","callback","inputElement","document","createElement","type","accept","multiple","addEventListener","dispatchEvent","MouseEvent","openFileDialog","event","baseURL","reader","FileReader","file","target","files","readAsDataURL","onload","result","Heading","margin","TextInput","value","width","onChange","e","Tooltip","content","IconButton","icon","TickIcon","intent","marginLeft","CrossIcon","style","marginRight","EditIcon","FloppyDiskIcon","element","setAttribute","encodeURIComponent","JSON","stringify","asBplistJson","body","appendChild","click","removeChild","exportPlaylist","DeleteIcon","AddIcon","Dialog","isShown","onCloseComplete","onConfirm","delete","confirmLabel","shouldCloseOnOverlayClick","Spinner","Text","isInvalid","onKeyPress","camelCaseToWords","text","replace","charAt","toUpperCase","slice","difficultyBadgePropsMap","easy","color","normal","hard","expert","expertPlus","getColText","song","difficulties","join","getTableCellPropsForCol","props","flexBasis","flexGrow","flexShrink","includes","getTableCellForCol","Table","Cell","coverURL","difficultyKey","sort","k1","k2","difficultyKeys","indexOf","Badge","console","error","getDifficultyBadge","TextCell","getColHeaderText","DraggableRow","idx","playlistId","onRemoveSongClick","columnsToShow","useContext","getPlaylistColumnNamesToShow","draggableId","hash","index","provided","Row","isSelectable","height","ref","innerRef","draggableProps","dragHandleProps","DragHandleHorizontalIcon","songToRemove","setSongToRemove","minWidth","overflowX","Head","HeaderCell","TextHeaderCell","Body","overflow","droppableId","id","snapshot","minHeight","songs","placeholder","removeSong","PlaylistTable","userPreferences","padding","maxWidth","playlistHorizontalMode","borderRadius","backgroundColor","elevation","getMapByHash","fetch","json","getMapByKey","songKey","getBeatSaverMapList","page","searchBeatSaverMapList","search","beatSaverBrowserCategories","beatSaverBrowserStore","_songsList","_totalPages","_page","_search","_category","_loading","fetchSongs","loading","resp","category","totalPages","lastPage","songsList","docs","BeatSaverBrowserStoreContext","beatSaverSongCache","songCache","data","hashes","rateLimitDelay","missingHashes","loadedSongHashes","push","Promise","res","setTimeout","retrieveSongData","Song","savedSong","songData","_hash","beatSaverSongObject","getSongDataByHash","metadata","songName","songAuthorName","levelAuthorName","description","date","Date","setSeconds","duration","toISOString","substr","stats","downloads","plays","upVotes","downVotes","Number","parseFloat","rating","toPrecision","uploaded","toLocaleDateString","levelid","characteristics","flatMap","characteristic","Playlist","savedPlaylist","_id","_image","_title","_author","_songs","savePlaylist","deletePlaylist","splice","Error","find","manualAddSongData","s","asJson","playlistTitle","playlistAuthor","playlistStore","_playlists","addPlaylistFromBplistData","retrieveMultipleSongData","getNewId","appendPlaylistToTop","playlistIds","playlists","playlistJson","_playlistIds","p","newId","uuidv4","savePlaylistLUT","remove","playlistsJson","PlaylistStoreContext","DROPPABLE_ID","PlaylistsViewer","horizontalMode","direction","border","playlistKey","PlaylistsContainer","_audioPlayer","Audio","_previewingSongFile","_previewingSongHash","_paused","onended","previewingSongHash","paused","pause","currentTime","play","previewSong","AudioPlayer","downloadURL","zipFile","JSZip","blob","loadAsync","loadedZip","eggFile","async","Blob","playSongSrc","window","URL","createObjectURL","readAsArrayBuffer","getButtonIcon","PlayIcon","PauseIcon","isLoading","BeatSaverBrowser","songStore","paddingLeft","paddingRight","overflowY","marginTop","marginBottom","Select","c","toLocaleUpperCase","SearchInput","err","isDropDisabled","PreviewSongButton","Pagination","onPageChange","onImportClick","Button","values","all","split","parse","preferences","playlistColumnsToShow","setLoading","exporting","setExporting","paddingTop","showBeatSaverBrowser","ChevronLeftIcon","ChevronRightIcon","createNewPlaylist","zip","generateAsync","saveAs","Checkbox","label","checked","setPlaylistColumnToShow","openHelp","setOpenHelp","justifyContent","background","HelpIcon","href","rel","SideSheet","Paragraph","backgroundRepeat","backgroundSize","TopNavbar","onDragEnd","destination","source","destIdx","sourceIdx","browserDroppableId","destinationPlaylist","songToAdd","addSongBySongData","playlistsDroppableId","playlistToMove","movePlaylist","sourcePlaylist","songToMove","insertSongAtIdx","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","init","ReactDOM","render","StrictMode","Provider","getElementById"],"mappings":"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","file":"static/js/main.a6ba971d.chunk.js","sourcesContent":["import { createContext } from \"react\";\nimport store from \"store\";\nimport { makeAutoObservable } from \"mobx\";\n\nconst bplistSongKeys = [\n  \"cover\",\n  \"name\",\n  \"songAuthor\",\n  \"levelAuthor\",\n  \"duration\",\n  \"difficulties\",\n  \"downloads\",\n  \"plays\",\n  \"upvotes\",\n  \"downvotes\",\n  \"rating\",\n  \"uploadDate\",\n  \"key\",\n  \"hash\",\n  \"description\",\n];\n\nconst initColumnsToShow = () => {\n  const output = {};\n  bplistSongKeys.forEach((key) => (output[key] = false));\n  output[\"cover\"] = true;\n  output[\"name\"] = true;\n\n  return output;\n};\n\nclass UserPreferencesStore {\n  _playlistsHorizontalMode = false;\n  _playlistColumnsToShow = undefined;\n  _showBeatSaverBrowser = false;\n\n  constructor() {\n    makeAutoObservable(this);\n    this._playlistsHorizontalMode =\n      store.get(\"playlistHorizontalMode\") || false;\n    this._playlistColumnsToShow =\n      store.get(\"playlistColumnsToShow\") || initColumnsToShow();\n    this._showBeatSaverBrowser = store.get(\"showBeatSaverBrowser\") || false;\n  }\n\n  get playlistHorizontalMode() {\n    return this._playlistsHorizontalMode;\n  }\n  set playlistHorizontalMode(flag) {\n    this._playlistsHorizontalMode = flag;\n    store.set(\"playlistHorizontalMode\", this._playlistsHorizontalMode);\n  }\n\n  get playlistColumnsToShow() {\n    return this._playlistColumnsToShow;\n  }\n  set playlistColumnsToShow(columns) {\n    this._playlistColumnsToShow = columns;\n    store.set(\"playlistColumnsToShow\", this._playlistColumnsToShow); // probably can autorun the save function\n  }\n\n  get showBeatSaverBrowser() {\n    return this._showBeatSaverBrowser;\n  }\n  set showBeatSaverBrowser(flag) {\n    this._showBeatSaverBrowser = flag;\n    this._showBeatSaverBrowser = store.set(\n      \"showBeatSaverBrowser\",\n      this._showBeatSaverBrowser\n    );\n  }\n\n  setPlaylistColumnToShow(key, flag) {\n    this._playlistColumnsToShow[key] = flag;\n    store.set(\"playlistColumnsToShow\", this._playlistColumnsToShow);\n  }\n  getPlaylistColumnNamesToShow() {\n    const columns = Object.entries(this._playlistColumnsToShow)\n      .filter(([_, value]) => value)\n      .map(([key, _]) => key);\n    if (columns.length === 0) {\n      return Object.keys(this._playlistColumnsToShow);\n    }\n    return columns;\n  }\n}\n\nexport const userPreferencesStore = new UserPreferencesStore();\nexport const UserPreferencesContext = createContext(userPreferencesStore);\n","import { useState } from \"react\";\n\nimport { observer } from \"mobx-react-lite\";\nimport mixpanel from \"mixpanel-browser\";\nimport {\n  Avatar,\n  Heading,\n  FloppyDiskIcon,\n  EditIcon,\n  Tooltip,\n  TextInput,\n  Pane,\n  DeleteIcon,\n  Dialog,\n  AddIcon,\n  Spinner,\n  IconButton,\n  TickIcon,\n  CrossIcon,\n  Text,\n  toaster,\n} from \"evergreen-ui\";\n\nconst exportPlaylist = (playlist) => {\n  var element = document.createElement(\"a\");\n  element.setAttribute(\n    \"href\",\n    \"data:text/plain;charset=utf-8,\" +\n      encodeURIComponent(JSON.stringify(playlist.asBplistJson()))\n  );\n  element.setAttribute(\"download\", `${playlist.title}.bplist`);\n\n  element.style.display = \"none\";\n  document.body.appendChild(element);\n\n  element.click();\n\n  document.body.removeChild(element);\n};\n\nfunction openFileDialog(callback) {\n  // this function must be called from  a user\n  // activation event (ie an onclick event)\n\n  // Create an input element\n  var inputElement = document.createElement(\"input\");\n  // Set its type to file\n  inputElement.type = \"file\";\n  // Set accept to the file types you want the user to select.\n  // Include both the file extension and the mime type\n  inputElement.accept = \"image/*\";\n  // Accept multiple files\n  inputElement.multiple = false;\n  // set onchange event to call callback when user has selected file\n  inputElement.addEventListener(\"change\", callback);\n  // dispatch a click event to open the file dialog\n  inputElement.dispatchEvent(new MouseEvent(\"click\"));\n}\n\nexport const Header = ({ playlist }) => {\n  const [editTextData, setEditTextData] = useState(false);\n  const [showDeleteConfirmation, setShowDeleteConfirmation] = useState(false);\n\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  const [showAddSongLoader, setShowAddSongLoader] = useState(false);\n  const [addSongError, setAddSongError] = useState(false);\n  const [songKeyInput, setSongKeyInput] = useState(\"\");\n\n  const [titleInput, setTitleInput] = useState(playlist.title);\n  const [authorInput, setAuthorInput] = useState(playlist.author);\n\n  const onSongKeyAdd = async () => {\n    try {\n      setAddSongError(false);\n      setShowAddSongLoader(true);\n      const addedSongData = await playlist.addSongByKey(songKeyInput);\n      toaster.success(`${addedSongData.name} added to ${playlist.title}.`);\n      mixpanel.track(\"addNewSongByKeySuccess\", {\n        event_category: \"playlist\",\n        event_label: \"addNewSongByKeySuccess\",\n      });\n    } catch (err) {\n      setAddSongError(true);\n      toaster.danger(err.message);\n      mixpanel.track(\"addNewSongByKeyFail\", {\n        event_category: \"playlist\",\n        event_label: \"addNewSongByKeyFail\",\n      });\n    } finally {\n      setShowAddSongLoader(false);\n    }\n  };\n\n  return (\n    <Pane\n      display=\"flex\"\n      flexDirection=\"row\"\n      alignItems=\"center\"\n      paddingBottom=\"5px\"\n    >\n      <Avatar\n        src={playlist.image && \"data:image/png;\" + playlist.image}\n        name={playlist.title}\n        size={50}\n        onClick={() => {\n          mixpanel.track(\"playlistImageChange\", {\n            event_category: \"playlist\",\n            event_label: \"playlistImageChange\",\n          });\n          // get image upload and replace image in base64\n          openFileDialog((event) => {\n            let baseURL = \"\";\n            const reader = new FileReader();\n            const file = event.target.files[0];\n            reader.readAsDataURL(file);\n            reader.onload = () => {\n              baseURL = reader.result;\n              playlist.image = baseURL;\n              toaster.success(\"Image saved and updated.\");\n            };\n          });\n        }}\n      />\n      <Heading margin={10}>\n        {editTextData ? (\n          <>\n            <TextInput\n              value={titleInput}\n              width=\"100px\"\n              onChange={(e) => setTitleInput(e.target.value)}\n            />{\" \"}\n            -{\" \"}\n            <TextInput\n              value={authorInput}\n              width=\"100px\"\n              onChange={(e) => setAuthorInput(e.target.value)}\n            />\n            <Tooltip content=\"Save/Confirm\">\n              <IconButton\n                icon={TickIcon}\n                intent=\"success\"\n                onClick={() => {\n                  mixpanel.track(\"playlistTitleAuthorUpdate\", {\n                    event_category: \"playlist\",\n                    event_label: \"playlistTitleAuthorUpdate\",\n                  });\n                  playlist.title = titleInput;\n                  playlist.author = authorInput;\n                  setEditTextData(false);\n                }}\n                marginLeft=\"2px\"\n              />\n            </Tooltip>\n            <Tooltip content=\"Discard Changes\">\n              <IconButton\n                icon={CrossIcon}\n                intent=\"danger\"\n                onClick={() => {\n                  setTitleInput(playlist.title);\n                  setAuthorInput(playlist.author);\n                  setEditTextData(false);\n                }}\n                marginLeft=\"2px\"\n              />\n            </Tooltip>\n          </>\n        ) : (\n          <>\n            {playlist.title} - {playlist.author}\n          </>\n        )}\n      </Heading>\n      <div style={{ marginLeft: \"auto\", marginRight: 0 }}>\n        <Tooltip content=\"Edit Title & Author\">\n          <IconButton\n            icon={EditIcon}\n            onClick={() => {\n              mixpanel.track(\"playlistEditToggle\", {\n                event_category: \"playlist\",\n                event_label: \"playlistEditToggle\",\n                value: !editTextData,\n              });\n              setEditTextData(!editTextData);\n            }}\n            marginLeft=\"2px\"\n          />\n        </Tooltip>\n        <Tooltip content=\"Download\">\n          <IconButton\n            icon={FloppyDiskIcon}\n            marginLeft=\"2px\"\n            onClick={() => {\n              mixpanel.track(\"savePlaylst\", {\n                event_category: \"playlist\",\n                event_label: \"savePlaylst\",\n              });\n              exportPlaylist(playlist);\n            }}\n          />\n        </Tooltip>\n        <Tooltip content=\"Delete\">\n          <IconButton\n            icon={DeleteIcon}\n            marginLeft=\"2px\"\n            onClick={() => {\n              mixpanel.track(\"deletePlaylist\", {\n                event_category: \"playlist\",\n                event_label: \"deletePlaylist\",\n              });\n              setShowDeleteConfirmation(true);\n            }}\n          />\n        </Tooltip>\n        <Tooltip content=\"Add new song\">\n          <IconButton\n            icon={AddIcon}\n            marginLeft=\"2px\"\n            onClick={() => {\n              mixpanel.track(\"addSongByKey\", {\n                event_category: \"playlist\",\n                event_label: \"addSongByKey\",\n              });\n              setShowAddDialog(true);\n            }}\n          />\n        </Tooltip>\n      </div>\n      <Dialog\n        /* this will vanish immediatetly on confirm, can consider moving out to global modals */\n        isShown={showDeleteConfirmation}\n        title={`Delete ${playlist.title}?`}\n        onCloseComplete={() => setShowDeleteConfirmation(false)}\n        onConfirm={() => {\n          mixpanel.track(\"deletePlaylistConfirmation\", {\n            event_category: \"playlist\",\n            event_label: \"deletePlaylistConfirmation\",\n          });\n          playlist.delete();\n          toaster.success(`${playlist.title} deleted successfully.`);\n          setShowDeleteConfirmation(false);\n        }}\n        confirmLabel={\"Confirm\"}\n        intent=\"danger\"\n      >\n        This action is irreverisble!\n      </Dialog>\n\n      <Dialog\n        shouldCloseOnOverlayClick={false}\n        isShown={showAddDialog}\n        title={`Add new song to ${playlist.title}`}\n        onCloseComplete={() => setShowAddDialog(false)}\n        onConfirm={onSongKeyAdd}\n        confirmLabel={\"Add\"}\n      >\n        {showAddSongLoader && <Spinner />}\n        <Text>Add the song key 🔑 you want to add here:</Text>\n        <TextInput\n          marginLeft=\"10px\"\n          width=\"80px\"\n          isInvalid={addSongError}\n          value={songKeyInput}\n          onChange={(e) => setSongKeyInput(e.target.value)}\n          onKeyPress={(e) => {\n            if (e.key === \"Enter\") {\n              onSongKeyAdd();\n            }\n          }}\n        ></TextInput>\n      </Dialog>\n    </Pane>\n  );\n};\n\nexport default observer(Header);\n","export const camelCaseToWords = (text) => {\n  var result = text.replace(/([A-Z])/g, \" $1\");\n  var finalResult = result.charAt(0).toUpperCase() + result.slice(1);\n  return finalResult;\n};\n","import { Badge, Table, Avatar } from \"evergreen-ui\";\nimport { camelCaseToWords } from \"../utils/string\";\n\nexport const difficultyBadgePropsMap = {\n  easy: { text: \"EZ\", color: \"green\" },\n  normal: { text: \"N\", color: \"blue\" },\n  hard: { text: \"H\", color: \"yellow\" },\n  expert: { text: \"E\", color: \"red\" },\n  expertPlus: { text: \"E+\", color: \"purple\" },\n};\n\nexport const getDifficultyBadge = (difficultyKey) => {\n  if (!(difficultyKey in difficultyBadgePropsMap)) {\n    console.error(\"missing difficulty key: \", difficultyKey);\n    return;\n  }\n  const { text, color } = difficultyBadgePropsMap[difficultyKey];\n  return (\n    <Badge key={difficultyKey} color={color}>\n      {text}\n    </Badge>\n  );\n};\n\nexport const getColText = (key, song) => {\n  // special cases\n  switch (key) {\n    case \"difficulties\":\n      return Object.entries(song.difficulties)\n        .filter(([key, value]) => value)\n        .map(([key, _]) => key)\n        .join(\",\");\n    default:\n      break;\n  }\n\n  // very dirty way to parse out the relevant col data\n  if (key in song) {\n    return song[key];\n  }\n};\n\nexport const getTableCellPropsForCol = (key) => {\n  // levelAuthor, songAuthor, difficulties\n  let props = {\n    flexBasis: 150,\n    flexGrow: 0,\n    flexShrink: 0,\n  };\n  if (key === \"description\") {\n    props = {\n      flexBasis: 600,\n      flexGrow: 0,\n      flexShrink: 0,\n    };\n  } else if (key === \"hash\") {\n    props = {\n      flexBasis: 300,\n      flexGrow: 0,\n      flexShrink: 0,\n    };\n  } else if (key === \"name\") {\n    props = {\n      flexBasis: 200,\n      flexGrow: 0,\n      flexShrink: 0,\n    };\n  } else if (key === \"uploadDate\") {\n    props = {\n      flexBasis: 120,\n      flexGrow: 0,\n      flexShrink: 0,\n    };\n  } else if (key === \"duration\") {\n    props = {\n      flexBasis: 90,\n      flexGrow: 0,\n      flexShrink: 0,\n    };\n  } else if (key === \"cover\") {\n    props = {\n      flexBasis: 60,\n      flexGrow: 0,\n      flexShrink: 0,\n    };\n  } else if (\n    [\"downloads\", \"plays\", \"upvotes\", \"downvotes\", \"rating\", \"key\"].includes(\n      key\n    )\n  ) {\n    // small width cells\n    props = {\n      flexBasis: 72,\n      flexGrow: 0,\n      flexShrink: 0,\n    };\n  }\n\n  return props;\n};\n\nexport const getTableCellForCol = (key, song) => {\n  if (key === \"cover\") {\n    return (\n      <Table.Cell key={key} {...getTableCellPropsForCol(key)}>\n        <Avatar src={song.coverURL} size={40} />\n      </Table.Cell>\n    );\n  }\n\n  if (key === \"difficulties\") {\n    return (\n      <Table.Cell key={key} {...getTableCellPropsForCol(key)}>\n        {Object.entries(song.difficulties)\n          .filter(([_, flag]) => flag)\n          .map(([difficultyKey, _]) => difficultyKey)\n          .sort((k1, k2) => {\n            const difficultyKeys = Object.keys(difficultyBadgePropsMap);\n            return difficultyKeys.indexOf(k1) - difficultyKeys.indexOf(k2);\n          })\n          .map((difficultyKey) => getDifficultyBadge(difficultyKey))}\n      </Table.Cell>\n    );\n  }\n\n  return (\n    <Table.TextCell key={key} {...getTableCellPropsForCol(key)}>\n      {getColText(key, song)}\n    </Table.TextCell>\n  );\n};\n\nexport const getColHeaderText = (key) => {\n  // to handle special small width text\n  switch (key) {\n    case \"upvotes\":\n      return \"👍\";\n    case \"downvotes\":\n      return \"👎\";\n    case \"downloads\":\n      return \"💾\";\n    case \"plays\":\n      return \"▶️\";\n    case \"rating\":\n      return \"💯\";\n    case \"key\":\n      return \"🔑\";\n    default:\n      return camelCaseToWords(key);\n  }\n};\n","import { useContext, useState } from \"react\";\nimport { observer, Observer } from \"mobx-react-lite\";\n\nimport {\n  Table,\n  DragHandleHorizontalIcon,\n  DeleteIcon,\n  Dialog,\n  toaster,\n} from \"evergreen-ui\";\nimport { Draggable, Droppable } from \"react-beautiful-dnd\";\n\nimport { UserPreferencesContext } from \"../../../stores/preferences\";\n\nimport {\n  getTableCellForCol,\n  getTableCellPropsForCol,\n  getColHeaderText,\n} from \"../../../sharedUtils/playlistTable\";\n\nconst DraggableRow = ({ idx, playlistId, song, onRemoveSongClick }) => {\n  const preferences = useContext(UserPreferencesContext);\n  const columnsToShow = preferences.getPlaylistColumnNamesToShow();\n  return (\n    <Draggable\n      key={song.hash}\n      draggableId={`${playlistId}-${song.hash}`}\n      index={idx}\n    >\n      {(provided) => (\n        <Table.Row\n          key={song.hash}\n          isSelectable\n          height={42}\n          ref={provided.innerRef}\n          {...provided.draggableProps}\n          {...provided.dragHandleProps}\n        >\n          <Table.Cell flexBasis={40} flexGrow={0} flexShrink={0}>\n            <DragHandleHorizontalIcon />\n          </Table.Cell>\n          {columnsToShow.map((key) => getTableCellForCol(key, song))}\n          <Table.Cell\n            flexBasis={35}\n            flexGrow={0}\n            flexShrink={0}\n            marginRight={0}\n            marginLeft=\"auto\"\n          >\n            <DeleteIcon onClick={() => onRemoveSongClick(song)} />\n          </Table.Cell>\n        </Table.Row>\n      )}\n    </Draggable>\n  );\n};\n\nexport const SongList = ({ playlist }) => {\n  const preferences = useContext(UserPreferencesContext);\n  const columnsToShow = preferences.getPlaylistColumnNamesToShow();\n\n  const [songToRemove, setSongToRemove] = useState(null);\n  return (\n    <Table minWidth=\"400px\" overflowX=\"scroll\">\n      <Table.Head height={42}>\n        <Table.HeaderCell flexBasis={40} flexGrow={0} />\n        {columnsToShow.map((key) => (\n          <Table.TextHeaderCell key={key} {...getTableCellPropsForCol(key)}>\n            {getColHeaderText(key)}\n          </Table.TextHeaderCell>\n        ))}\n        <Table.HeaderCell\n          flexBasis={35}\n          flexGrow={0}\n          flexShrink={0}\n          marginRight={0}\n          marginLeft=\"auto\"\n        />\n      </Table.Head>\n      <Table.Body overflow=\"visible\">\n        <Droppable key={playlist.id} droppableId={playlist.id}>\n          {(provided, snapshot) => (\n            <div ref={provided.innerRef} style={{ minHeight: \"40px\" }}>\n              <Observer>\n                {() =>\n                  playlist.songs.map((song, idx) => (\n                    <DraggableRow\n                      key={song.hash}\n                      idx={idx}\n                      playlistId={playlist.id}\n                      song={song}\n                      onRemoveSongClick={(song) => setSongToRemove(song)}\n                    />\n                  ))\n                }\n              </Observer>\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      </Table.Body>\n      <Dialog\n        isShown={!!songToRemove}\n        title={`Delete ${songToRemove?.name} from ${playlist.title}?`}\n        onCloseComplete={() => setSongToRemove(null)}\n        onConfirm={() => {\n          playlist.removeSong(songToRemove);\n          setSongToRemove(null);\n          toaster.success(\n            `${songToRemove.name} deleted from ${playlist.title}.`\n          );\n        }}\n        confirmLabel={\"Confirm\"}\n        intent=\"danger\"\n      >\n        This action is irreverisble!\n      </Dialog>\n    </Table>\n  );\n};\n\nexport default observer(SongList);\n","import PlaylistTable from \"./PlaylistTable\";\nexport default PlaylistTable;\n","import { useContext } from \"react\";\nimport { observer } from \"mobx-react-lite\";\nimport { Pane } from \"evergreen-ui\";\nimport { UserPreferencesContext } from \"../../stores/preferences\";\n\nimport Header from \"./components/Header\";\nimport SongList from \"./components/SongList\";\n\nconst PlaylistTable = ({ playlist }) => {\n  const userPreferences = useContext(UserPreferencesContext);\n\n  return (\n    <Pane\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        padding: 10,\n        margin: 10,\n        minWidth: \"400px\",\n        maxWidth: userPreferences.playlistHorizontalMode ? \"800px\" : \"100%\",\n        borderRadius: 15,\n        backgroundColor: \"white\",\n      }}\n      elevation={2}\n    >\n      <Header playlist={playlist} />\n      <SongList playlist={playlist} />\n    </Pane>\n  );\n};\n\nexport default observer(PlaylistTable);\n","export const getMapByHash = async (hash) => {\n  return (await fetch(`https://beatsaver.com/api/maps/by-hash/${hash}`)).json();\n};\n\nexport const getMapByKey = async (songKey) => {\n  return await fetch(`https://beatsaver.com/api/maps/detail/${songKey}`);\n};\n\nexport const getBeatSaverMapList = async (page, type) => {\n  return (await fetch(`https://beatsaver.com/api/maps/${type}/${page}`)).json();\n};\n\nexport const searchBeatSaverMapList = async (page, search) => {\n  return (\n    await fetch(`https://beatsaver.com/api/search/text/${page}?q=${search}`)\n  ).json();\n};\n","import { createContext } from \"react\";\nimport store from \"store\";\n\nimport { makeAutoObservable } from \"mobx\";\nimport {\n  getBeatSaverMapList,\n  getMapByHash,\n  searchBeatSaverMapList,\n} from \"../controllers/api\";\n\nexport const beatSaverBrowserCategories = [\n  \"hot\",\n  \"rating\",\n  \"latest\",\n  \"downloads\",\n  \"plays\",\n];\n\n// beat saver server songs\nclass BeatSaverBrowserStore {\n  _songsList = [];\n  _totalPages = null;\n  _page = 0;\n  _search = \"\";\n  _category = beatSaverBrowserCategories[0];\n  _loading = false;\n\n  constructor() {\n    makeAutoObservable(this);\n\n    this.fetchSongs();\n  }\n\n  fetchSongs = async () => {\n    this.loading = true;\n    let resp;\n    try {\n      if (this.search !== null && this.search !== \"\") {\n        resp = await searchBeatSaverMapList(this.page, this.search);\n      } else {\n        resp = await getBeatSaverMapList(this.page, this.category);\n      }\n    } catch (err) {\n      throw err;\n    }\n    this.totalPages = resp.lastPage;\n    this.songsList = resp.docs;\n    this.loading = false;\n  };\n\n  get songsList() {\n    return this._songsList;\n  }\n  set songsList(songsList) {\n    this._songsList = songsList;\n  }\n  get totalPages() {\n    return this._totalPages;\n  }\n  set totalPages(totalPages) {\n    this._totalPages = totalPages;\n  }\n  get page() {\n    return this._page;\n  }\n  set page(page) {\n    this._page = page;\n  }\n  get loading() {\n    return this._loading;\n  }\n  set loading(loading) {\n    this._loading = loading;\n  }\n  get category() {\n    return this._category;\n  }\n  set category(category) {\n    if (category !== this._category) {\n      this.page = 0;\n    }\n    this._category = category;\n  }\n  get search() {\n    return this._search;\n  }\n  set search(search) {\n    if (search !== this._search) {\n      this.page = 0;\n    }\n    this._search = search;\n  }\n}\n\nexport const beatSaverBrowserStore = new BeatSaverBrowserStore();\nexport const BeatSaverBrowserStoreContext = createContext(\n  beatSaverBrowserStore\n);\n\n// stores a cache of beat-saver song data\nclass BeatSaverSongCache {\n  songCache = null;\n\n  constructor() {\n    this.songCache = store.get(\"songCache\") ?? {}; // hash: data\n  }\n\n  manualAddSongData(data) {\n    this.songCache[data.hash] = data;\n    store.set(\"songCache\", this.songCache);\n  }\n\n  async retrieveSongData(hash) {\n    if (!(hash in this.songCache)) {\n      const resp = await getMapByHash(hash);\n      this.songCache[hash] = resp;\n    } // else, skip (unless needs to overwrite for some reason?)\n\n    store.set(\"songCache\", this.songCache);\n  }\n\n  // would love to use Promise.all if no rate limit :(\n  async retrieveMultipleSongData(hashes, rateLimitDelay = 500) {\n    const missingHashes = hashes.filter((hash) => !(hash in this.songCache));\n    const loadedSongHashes = [];\n    for (const hash of missingHashes) {\n      try {\n        const resp = await getMapByHash(hash);\n        this.songCache[hash] = resp;\n        loadedSongHashes.push(hash);\n      } catch (err) {\n        console.error(err);\n      }\n      await new Promise((res) => setTimeout(res, rateLimitDelay)); // sleep\n    }\n    store.set(\"songCache\", this.songCache);\n    return loadedSongHashes;\n  }\n\n  getSongDataByHash(hash) {\n    if (!(hash in this.songCache)) {\n      this.retrieveSongData(hash);\n    }\n    return this.songCache[hash];\n  }\n}\n\nexport const beatSaverSongCache = new BeatSaverSongCache();\n","import { beatSaverSongCache } from \"./beatSaver\";\n\nexport class Song {\n  _hash = null; // unique id\n  beatSaverSongObject = undefined; // data object retrieve from beat-saver server\n\n  constructor(savedSong, songData = null) {\n    this._hash = savedSong.hash;\n    if (songData === null) {\n      this.beatSaverSongObject = beatSaverSongCache.getSongDataByHash(\n        this.hash\n      );\n    } else {\n      this.beatSaverSongObject = songData;\n    }\n  }\n\n  get hash() {\n    return this._hash;\n  }\n\n  get coverURL() {\n    return \"https://beatsaver.com\" + this.beatSaverSongObject?.coverURL;\n  }\n  get name() {\n    return this.beatSaverSongObject?.metadata.songName;\n  }\n  get songAuthor() {\n    return this.beatSaverSongObject?.metadata.songAuthorName;\n  }\n  get levelAuthor() {\n    return this.beatSaverSongObject?.metadata.levelAuthorName;\n  }\n  get difficulties() {\n    return this.beatSaverSongObject?.metadata.difficulties;\n  }\n  get description() {\n    return this.beatSaverSongObject?.description;\n  }\n  get duration() {\n    var date = new Date(0);\n    date.setSeconds(this.beatSaverSongObject?.metadata.duration); // specify value for SECONDS here\n    var timeString = date.toISOString().substr(14, 5);\n    return timeString;\n  }\n\n  get downloads() {\n    return this.beatSaverSongObject?.stats.downloads;\n  }\n  get plays() {\n    return this.beatSaverSongObject?.stats.plays;\n  }\n  get upvotes() {\n    return this.beatSaverSongObject?.stats.upVotes;\n  }\n  get downvotes() {\n    return this.beatSaverSongObject?.stats.downVotes;\n  }\n  get rating() {\n    return Number.parseFloat(\n      this.beatSaverSongObject?.stats.rating * 100 ?? 0.0\n    ).toPrecision(2);\n  }\n  get uploadDate() {\n    return new Date(this.beatSaverSongObject?.uploaded).toLocaleDateString();\n  }\n  get key() {\n    return this.beatSaverSongObject?.key;\n  }\n\n  asJson() {\n    // only need hash, as the rest of the data can be retrieved from cache\n    return {\n      hash: this.hash,\n    };\n  }\n\n  asBplistJson() {\n    return {\n      hash: this.hash,\n      levelid: `custom_level_${this.hash}`,\n      songName: this.beatSaverSongObject.metadata.name,\n      levelAuthorName: this.beatSaverSongObject.metadata.levelAuthorName,\n      difficulties: this.beatSaverSongObject.metadata.characteristics.flatMap(\n        (characteristic) =>\n          Object.entries(characteristic.difficulties)\n            .filter(([key, value]) => value !== null)\n            .map(([key, value]) => ({\n              characteristic: characteristic.name,\n              name: key,\n            }))\n      ),\n    };\n  }\n}\n\n/*\n{\n    \"metadata\":{\n        \"difficulties\":{\"easy\":false,\"normal\":true,\"hard\":true,\"expert\":true,\"expertPlus\":false},\n        \"duration\":0,\n        \"automapper\":null,\n        \"characteristics\":[\n            {\n                \"name\":\"Standard\",\n                \"difficulties\": {\n                    \"easy\":null,\n                    \"normal\":{\"duration\":355.7663269042969,\"length\":167,\"bombs\":334,\"notes\":375,\"obstacles\":9,\"njs\":10,\"njsOffset\":0},\n                    \"hard\":{\"duration\":355.7450866699219,\"length\":167,\"bombs\":306,\"notes\":480,\"obstacles\":3,\"njs\":10,\"njsOffset\":0},\n                    \"expert\":{\"duration\":355.7450866699219,\"length\":167,\"bombs\":138,\"notes\":662,\"obstacles\":3,\"njs\":10,\"njsOffset\":0},\n                    \"expertPlus\":null\n                }\n            }\n        ],\n        \"songName\":\"Technologic\",\n        \"songSubName\":\"Daft Punk\",\n        \"songAuthorName\":\"Awfulnaut\",\n        \"levelAuthorName\":\"awfulnaut\",\n        \"bpm\":127\n    },\n    \"stats\":{\n        \"downloads\":428745,\n        \"plays\":6632,\n        \"downVotes\":186,\n        \"upVotes\":9789,\n        \"heat\":120.6632514,\n        \"rating\":0.9512470277249632\n    },\n    \"description\":\"Expert / Hard / Normal\",\n    \"deletedAt\":null,\n    \"_id\":\"5cff620e48229f7d88fc67a8\",\n    \"key\":\"747\",\n    \"name\":\"Technologic - Daft Punk (Update)\",\n    \"uploader\":{\"_id\":\"5cff0b7398cc5a672c84edac\",\"username\":\"awfulnaut\"},\n    \"uploaded\":\"2018-06-30T18:30:38.000Z\",\n    \"hash\":\"831247d7d02e948e5d03622748bb130b5057023d\",\n    \"directDownload\":\"/cdn/747/831247d7d02e948e5d03622748bb130b5057023d.zip\",\n    \"downloadURL\":\"/api/download/key/747\",\n    \"coverURL\":\"/cdn/747/831247d7d02e948e5d03622748bb130b5057023d.jpg\"\n}\n*/\n","import { createContext } from \"react\";\nimport store from \"store\";\nimport { makeAutoObservable } from \"mobx\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport { Song } from \"./songs\";\nimport { beatSaverSongCache } from \"./beatSaver\";\nimport { getMapByKey } from \"../controllers/api\";\n\nexport class Playlist {\n  _id = null;\n  _image = null; // base64\n  _title = \"\";\n  _author = \"\";\n  _songs = []; // array of Songs\n\n  store = undefined;\n\n  constructor(savedPlaylist, store) {\n    makeAutoObservable(this);\n    this._id = savedPlaylist.id; // custom id\n    this._image = savedPlaylist.image;\n    this._title = savedPlaylist.title;\n    this._author = savedPlaylist.author;\n    this._songs = savedPlaylist.songs.map((song) => new Song(song));\n    this.store = store;\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  get image() {\n    return this._image;\n  }\n  set image(image) {\n    this._image = image;\n    this.store.savePlaylist(this);\n  }\n\n  get title() {\n    return this._title;\n  }\n  set title(title) {\n    this._title = title;\n    this.store.savePlaylist(this);\n  }\n\n  get author() {\n    return this._author;\n  }\n  set author(author) {\n    this._author = author;\n    this.store.savePlaylist(this);\n  }\n\n  get songs() {\n    return this._songs;\n  }\n  set songs(songs) {\n    this._songs = songs;\n    this.store.savePlaylist(this);\n  }\n\n  delete() {\n    this.store.deletePlaylist(this);\n  }\n\n  removeSong(song) {\n    const idx = this._songs.indexOf(song);\n    this._songs.splice(idx, 1);\n    this.store.savePlaylist(this);\n  }\n\n  insertSongAtIdx(song, idx) {\n    this._songs.splice(idx, 0, song);\n    this.store.savePlaylist(this);\n  }\n\n  async addSongByKey(songKey) {\n    /* try to find song in beat-saver\n     if have, save the data, and the song, save the playlist after\n     if not, do nothing\n     */\n    let songData;\n    try {\n      const resp = await getMapByKey(songKey);\n      songData = await resp.json();\n    } catch (err) {\n      throw Error(`Could not retreive song with key: ${songKey}`);\n    }\n\n    const duplicateSong = this._songs.find(\n      (song) => song.hash === songData.hash\n    );\n    if (duplicateSong) {\n      throw Error(\"Song already exists in playlist.\");\n    }\n\n    beatSaverSongCache.manualAddSongData(songData);\n    this.songs.push(new Song({ hash: songData.hash }));\n    this.store.savePlaylist(this);\n\n    return songData;\n  }\n\n  async addSongBySongData(songData, idx = undefined) {\n    const hash = songData.hash;\n    if (idx === undefined) {\n      idx = this._songs.length;\n    }\n    try {\n      if (this._songs.find((s) => s.hash === hash)) {\n        return; // should show some dup error\n      }\n      beatSaverSongCache.manualAddSongData(songData);\n      this._songs.splice(idx, 0, new Song({ hash })); // let Song handle fetching\n      this.store.savePlaylist(this);\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  asJson() {\n    return {\n      id: this._id,\n      image: this.image,\n      title: this.title,\n      author: this.author,\n      songs: this.songs.map((song) => song.asJson()),\n    };\n  }\n\n  asBplistJson() {\n    return {\n      image: this.image,\n      playlistTitle: this.title,\n      playlistAuthor: this.author,\n      songs: this.songs.map((song) => song.asBplistJson()),\n    };\n  }\n}\n\nclass PlaylistStore {\n  _playlists = []; // loaded Playlist instances\n\n  constructor() {\n    makeAutoObservable(this);\n\n    const playlistIds = store.get(\"playlistIdsLUT\");\n\n    if (playlistIds && playlistIds.length > 0) {\n      this.playlists = playlistIds.map((id) => {\n        const playlistJson = store.get(id);\n        return new Playlist(playlistJson, this);\n      });\n    }\n  }\n\n  get playlists() {\n    return this._playlists;\n  }\n  set playlists(playlists) {\n    this._playlists = playlists;\n  }\n  get playlistIds() {\n    return this._playlistIds;\n  }\n  set playlistIds(playlistIds) {\n    this._playlistIds = playlistIds;\n  }\n\n  getNewId() {\n    const playlistIds = this.playlists.map((p) => p.id);\n    let newId = uuidv4();\n\n    while (playlistIds.includes(newId)) {\n      newId = uuidv4();\n    }\n\n    return newId;\n  }\n\n  createNewPlaylist() {\n    const playlist = new Playlist(\n      {\n        id: this.getNewId(),\n        image: null,\n        title: \"New Playlist\",\n        author: \"Beaterlist\",\n        songs: [],\n      },\n      this\n    );\n    this.appendPlaylistToTop(playlist);\n  }\n\n  appendPlaylistToTop(playlist) {\n    this.playlists.splice(0, 0, playlist);\n    this.savePlaylist(playlist);\n    this.savePlaylistLUT();\n  }\n\n  deletePlaylist(playlist) {\n    const idx = this._playlists.indexOf(playlist);\n    this._playlists.splice(idx, 1);\n\n    store.remove(playlist.id);\n    this.savePlaylistLUT();\n  }\n\n  movePlaylist(playlist, idx) {\n    this.playlists.splice(this.playlists.indexOf(playlist), 1);\n    this.playlists.splice(idx, 0, playlist);\n\n    this.savePlaylistLUT();\n  }\n\n  savePlaylistLUT() {\n    store.set(\n      \"playlistIdsLUT\",\n      this.playlists.map((p) => p.id)\n    );\n  }\n\n  savePlaylist(playlist) {\n    const playlistJson = playlist.asJson();\n    store.set(playlist.id, playlistJson);\n  }\n\n  saveAllPlaylists() {\n    const playlistsJson = this._playlists.map((playlist) => playlist.asJson());\n    store.set(\"playlists\", playlistsJson);\n  }\n\n  addPlaylistFromBplistData = async (data) => {\n    // do preloading here for multiple songs\n    const loadedSongHashes = await beatSaverSongCache.retrieveMultipleSongData(\n      data.songs.map((song) => song.hash)\n    );\n    const playlist = new Playlist(\n      {\n        id: this.getNewId(),\n        image: data.image,\n        title: data.playlistTitle,\n        author: data.playlistAuthor,\n        songs: data.songs.filter((s) => loadedSongHashes.includes(s.hash)),\n      },\n      this\n    );\n    this.appendPlaylistToTop(playlist);\n  };\n}\n\nexport const playlistStore = new PlaylistStore();\nexport const PlaylistStoreContext = createContext(playlistStore);\n","import { useContext } from \"react\";\nimport { observer, Observer } from \"mobx-react-lite\";\nimport { Droppable, Draggable } from \"react-beautiful-dnd\";\n\nimport PlaylistTable from \"./PlaylistTable/\";\n\nimport { UserPreferencesContext } from \"../stores/preferences\";\nimport { PlaylistStoreContext } from \"../stores/playlists\";\n\nexport const DROPPABLE_ID = \"PLAYLIST\";\n\nconst PlaylistsContainer = () => {\n  const userPreferences = useContext(UserPreferencesContext);\n  const playlistStore = useContext(PlaylistStoreContext);\n  return (\n    <PlaylistsViewer\n      userPreferences={userPreferences}\n      playlistStore={playlistStore}\n    />\n  );\n};\n\nconst PlaylistsViewer = observer(({ userPreferences, playlistStore }) => {\n  const horizontalMode = userPreferences.playlistHorizontalMode;\n  return (\n    <div\n      style={{\n        width: horizontalMode ? \"100%\" : \"100%\",\n        minWidth: \"600px\",\n        height: \"100vh\",\n      }}\n    >\n      <Droppable\n        droppableId={DROPPABLE_ID}\n        type={DROPPABLE_ID}\n        direction={horizontalMode ? \"horizontal\" : \"vertical\"}\n      >\n        {(provided) => (\n          <>\n            <div\n              ref={provided.innerRef}\n              style={{\n                width: horizontalMode ? \"100%\" : \"100%\",\n                minWidth: \"600px\",\n                height: \"100vh\",\n\n                display: \"flex\",\n                flexDirection: horizontalMode ? \"row\" : \"column\",\n                border: \"default\",\n                overflowX: \"scroll\",\n              }}\n            >\n              <Observer>\n                {() =>\n                  playlistStore.playlists.map((playlist, idx) => (\n                    <Draggable\n                      key={playlist.id}\n                      draggableId={playlist.id}\n                      index={idx}\n                    >\n                      {(provided) => (\n                        <div\n                          ref={provided.innerRef}\n                          {...provided.draggableProps}\n                          {...provided.dragHandleProps}\n                        >\n                          <PlaylistTable\n                            key={`${playlist.title}|${idx}`}\n                            playlistKey={`${playlist.title}|${idx}`}\n                            playlist={playlist}\n                          />\n                        </div>\n                      )}\n                    </Draggable>\n                  ))\n                }\n              </Observer>\n            </div>\n            {provided.placeholder}\n          </>\n        )}\n      </Droppable>\n    </div>\n  );\n});\n\nexport default PlaylistsContainer;\n","import { makeAutoObservable } from \"mobx\";\n\nclass AudioPlayer {\n  _audioPlayer = new Audio();\n  _previewingSongFile = null;\n  _previewingSongHash = null;\n  _loading = false;\n  _paused = false;\n\n  constructor() {\n    makeAutoObservable(this);\n    this._audioPlayer.onended = () => (this.previewingSongHash = null);\n  }\n\n  get previewingSongHash() {\n    return this._previewingSongHash;\n  }\n  set previewingSongHash(previewingSongHash) {\n    this._previewingSongHash = previewingSongHash;\n  }\n  get loading() {\n    return this._loading;\n  }\n  set loading(loading) {\n    this._loading = loading;\n  }\n  get paused() {\n    return this._paused;\n  }\n  set paused(paused) {\n    this._paused = paused;\n  }\n\n  playSongSrc(src) {\n    this.paused = false;\n    this._audioPlayer.pause();\n    this._audioPlayer.currentTime = 0;\n\n    this._audioPlayer.src = src;\n    this._audioPlayer.play();\n  }\n\n  play() {\n    this.paused = false;\n    this._audioPlayer.play();\n  }\n\n  pause() {\n    this.paused = true;\n    this._audioPlayer.pause();\n  }\n}\n\nexport default new AudioPlayer();\n","import { observer } from \"mobx-react-lite\";\nimport AudioPlayer from \"../../../stores/audioPlayer\";\nimport JSZip from \"jszip\";\nimport mixpanel from \"mixpanel-browser\";\n\nimport { PlayIcon, IconButton, PauseIcon } from \"evergreen-ui\";\n\nconst previewSong = async (song) => {\n  if (!AudioPlayer.paused) {\n    AudioPlayer.pause();\n  }\n  AudioPlayer.loading = true;\n  AudioPlayer.previewingSongHash = song.hash;\n  const resp = await fetch(\"https://beatsaver.com\" + song.downloadURL);\n\n  var zipFile = new JSZip();\n  const loadedZip = await zipFile.loadAsync(await resp.blob());\n  const eggFile = Object.entries(loadedZip.files).find(([key, _]) =>\n    key.includes(\".egg\")\n  );\n  if (eggFile) {\n    // try to play file?\n    const file = await eggFile[1].async(\"arraybuffer\");\n    const blob = new Blob([file], { type: \"audio/wav\" });\n\n    const reader = new FileReader();\n    reader.onload = function (e) {\n      AudioPlayer.playSongSrc(window.URL.createObjectURL(blob));\n      AudioPlayer.loading = false;\n    };\n    reader.readAsArrayBuffer(blob);\n  }\n};\n\nconst getButtonIcon = (songData) => {\n  if (!(AudioPlayer.previewingSongHash === songData.hash)) {\n    return PlayIcon;\n  }\n\n  if (AudioPlayer.loading) {\n    return undefined;\n  }\n\n  if (AudioPlayer.paused) {\n    return PlayIcon;\n  }\n\n  return PauseIcon;\n};\n\nconst onClick = (songData) => {\n  if (!(AudioPlayer.previewingSongHash === songData.hash)) {\n    mixpanel.track(\"pressPreviewSongButton\", {\n      event_category: \"beatSaverBrowser\",\n      event_label: \"pressPreviewSongButton\",\n    });\n    previewSong(songData);\n    return;\n  }\n\n  if (AudioPlayer.paused) {\n    AudioPlayer.play();\n    mixpanel.track(\"pressPlaySong\", {\n      event_category: \"beatSaverBrowser\",\n      event_label: \"pressPlaySong\",\n    });\n    return;\n  }\n  mixpanel.track(\"pressPauseSong\", {\n    event_category: \"beatSaverBrowser\",\n    event_label: \"pressPauseSong\",\n  });\n  AudioPlayer.pause();\n};\n\nexport const PreviewButton = ({ songData }) => (\n  <IconButton\n    intent={\n      AudioPlayer.previewingSongHash === songData.hash ? \"success\" : undefined\n    }\n    isLoading={\n      AudioPlayer.previewingSongHash === songData.hash && AudioPlayer.loading\n    }\n    icon={getButtonIcon(songData)}\n    size=\"small\"\n    onClick={() => onClick(songData)}\n  />\n);\n\nexport default observer(PreviewButton);\n","export const DROPPABLE_ID = \"BEAT_SAVER_BROWSER\";\n","import BeatSaverBrowser from \"./BeatSaverBrowser\";\nexport default BeatSaverBrowser;\n","import { useContext } from \"react\";\nimport { observer, Observer } from \"mobx-react-lite\";\n\nimport {\n  Table,\n  Text,\n  Pane,\n  Heading,\n  Pagination,\n  SearchInput,\n  Select,\n  Spinner,\n  toaster,\n} from \"evergreen-ui\";\nimport { Draggable, Droppable } from \"react-beautiful-dnd\";\n\nimport {\n  BeatSaverBrowserStoreContext,\n  beatSaverBrowserCategories,\n} from \"../../stores/beatSaver\";\nimport { UserPreferencesContext } from \"../../stores/preferences\";\n\nimport {\n  getTableCellForCol,\n  getTableCellPropsForCol,\n  getColHeaderText,\n} from \"../../sharedUtils/playlistTable\";\nimport { Song } from \"../../stores/songs\";\n\nimport PreviewSongButton from \"./components/PreviewSongButton\";\n\nimport { DROPPABLE_ID } from \"./constants\";\n\nconst BeatSaverBrowser = () => {\n  const songStore = useContext(BeatSaverBrowserStoreContext);\n\n  const preferences = useContext(UserPreferencesContext);\n  const columnsToShow = preferences.getPlaylistColumnNamesToShow();\n\n  return (\n    <Pane\n      minWidth=\"400px\"\n      maxWidth=\"calc(50% - 250px)\"\n      height=\"100vh\"\n      paddingLeft=\"20px\"\n      paddingRight=\"20px\"\n      backgroundColor=\"white\"\n      overflowY=\"scroll\"\n    >\n      <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n        <Heading marginTop=\"10px\" marginBottom=\"10px\">\n          BeatSaver Browser\n        </Heading>\n        {songStore.loading && <Spinner marginLeft=\"auto\" marginRight=\"0px\" />}\n      </div>\n      <Text>\n        Drag songs from here to your playlists to add songs directly. Currently,\n        you can only either filter by category, or do a search, but not with\n        each other.\n      </Text>\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n        }}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            marginBottom: 10,\n            marginTop: 10,\n          }}\n        >\n          <Select\n            width=\"100px\"\n            marginRight=\"30px\"\n            value={songStore.category}\n            onChange={(e) => {\n              songStore.search = \"\";\n              songStore.category = e.target.value;\n              songStore.fetchSongs();\n            }}\n          >\n            {beatSaverBrowserCategories.map((c) => (\n              <option key={c} value={c}>\n                {c.toLocaleUpperCase()}\n              </option>\n            ))}\n          </Select>\n          <SearchInput\n            placeholder=\"Search...\"\n            onChange={(e) => {\n              songStore.search = e.target.value;\n            }}\n            value={songStore.search}\n            onKeyPress={(e) => {\n              if (e.key === \"Enter\") {\n                try {\n                  songStore.fetchSongs();\n                } catch (err) {\n                  toaster.danger(\"An error has occured.\");\n                } finally {\n                }\n              }\n            }}\n          />\n        </div>\n      </div>\n      <Table minWidth=\"400px\" overflowX=\"scroll\">\n        <Table.Head height={42}>\n          <Table.HeaderCell flexBasis={40} flexGrow={0} />\n          {columnsToShow.map((key) => (\n            <Table.TextHeaderCell key={key} {...getTableCellPropsForCol(key)}>\n              {getColHeaderText(key)}\n            </Table.TextHeaderCell>\n          ))}\n        </Table.Head>\n        <Droppable droppableId={DROPPABLE_ID} isDropDisabled={true}>\n          {(provided, snapshot) => (\n            <Table.Body\n              overflow=\"visible\"\n              display=\"flex\"\n              flexDirection=\"column\"\n              ref={provided.innerRef}\n            >\n              <Observer>\n                {() =>\n                  songStore.songsList.map((songData, idx) => (\n                    <Draggable\n                      key={songData.hash}\n                      draggableId={`browser-${songData.hash}`}\n                      index={idx}\n                    >\n                      {(provided, snapshot) => (\n                        <Table.Row\n                          height={40}\n                          key={songData.hash}\n                          ref={provided.innerRef}\n                          {...provided.draggableProps}\n                          {...provided.dragHandleProps}\n                        >\n                          <Table.Cell\n                            flexBasis={40}\n                            flexGrow={0}\n                            flexShrink={0}\n                          >\n                            <PreviewSongButton songData={songData} />\n                          </Table.Cell>\n                          {columnsToShow.map((key) =>\n                            getTableCellForCol(\n                              key,\n                              new Song(songData.hash, songData)\n                            )\n                          )}\n                        </Table.Row>\n                      )}\n                    </Draggable>\n                  ))\n                }\n              </Observer>\n              {provided.placeholder}\n            </Table.Body>\n          )}\n        </Droppable>\n      </Table>\n      <Pagination\n        // beat saver uses 0 indexed pages\n        page={songStore.page + 1}\n        totalPages={songStore.totalPages + 1}\n        onPageChange={(page) => {\n          songStore.page = page - 1;\n          songStore.fetchSongs();\n        }}\n      />\n    </Pane>\n  );\n};\n\nexport default observer(BeatSaverBrowser);\n","import { Button } from \"evergreen-ui\";\nimport { observer } from \"mobx-react-lite\";\n\nconst PlaylistImporter = ({ onImportClick, ...props }) => {\n  return (\n    <Button\n      onClick={() => {\n        var element = document.createElement(\"input\");\n        element.setAttribute(\"type\", \"file\");\n        element.setAttribute(\"multiple\", true);\n        element.setAttribute(\"accept\", \".bplist,.json\");\n\n        element.addEventListener(\"change\", async (e) => {\n          const files = Object.values(e.target.files);\n          // assume bplist and json files can be parsed as json\n          const playlists = await Promise.all(\n            files.map(async (file) => ({\n              type: file.name.split(\".\")[1],\n              data: JSON.parse(await file.text()),\n            }))\n          );\n          onImportClick(playlists);\n        });\n\n        element.style.display = \"none\";\n        document.body.appendChild(element);\n        element.click();\n        document.body.removeChild(element);\n      }}\n      {...props}\n    >\n      Import playlist(s)\n    </Button>\n  );\n};\n\nexport default observer(PlaylistImporter);\n","import { useContext, useState } from \"react\";\nimport mixpanel from \"mixpanel-browser\";\nimport {\n  Heading,\n  Checkbox,\n  Button,\n  toaster,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n} from \"evergreen-ui\";\nimport { observer } from \"mobx-react-lite\";\nimport { saveAs } from \"file-saver\";\nimport JSZip from \"jszip\";\n\nimport PlaylistImporter from \"./PlaylistImporter\";\nimport { UserPreferencesContext } from \"../stores/preferences\";\nimport { PlaylistStoreContext } from \"../stores/playlists\";\nimport { camelCaseToWords } from \"../utils/string\";\n\nexport const Sidebar = () => {\n  const preferences = useContext(UserPreferencesContext);\n  const horizontalMode = preferences.playlistHorizontalMode;\n  const columnsToShow = preferences.playlistColumnsToShow;\n\n  const playlistStore = useContext(PlaylistStoreContext);\n\n  const [loading, setLoading] = useState(false);\n  const [exporting, setExporting] = useState(false);\n  return (\n    <div\n      style={{\n        backgroundColor: \"white\",\n        height: \"calc(100vh - 100px)\",\n        overflowY: \"scroll\",\n      }}\n    >\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          paddingTop: 20,\n          paddingBottom: 20,\n          paddingLeft: 20,\n          paddingRight: 20,\n        }}\n      >\n        <Button\n          onClick={() => {\n            mixpanel.track(\"showBeatSaverBrowser\", {\n              event_category: \"sidebarConfig\",\n              event_label: \"showBeatSaverBrowser\",\n              value: !preferences.showBeatSaverBrowser,\n            });\n            preferences.showBeatSaverBrowser =\n              !preferences.showBeatSaverBrowser;\n          }}\n          marginBottom=\"10px\"\n        >\n          {preferences.showBeatSaverBrowser ? (\n            <>\n              Hide BeatSaver browser\n              <ChevronLeftIcon />\n            </>\n          ) : (\n            <>\n              Show BeatSaver browser\n              <ChevronRightIcon />\n            </>\n          )}\n        </Button>\n        <Button\n          onClick={() => {\n            mixpanel.track(\"createNewPlaylist\", {\n              event_category: \"sidebarConfig\",\n              event_label: \"createNewPlaylist\",\n            });\n            playlistStore.createNewPlaylist();\n            toaster.success(\"New Playlist created.\");\n          }}\n          marginBottom=\"10px\"\n        >\n          Add new playlist\n        </Button>\n        <PlaylistImporter\n          isLoading={loading}\n          marginBottom=\"10px\"\n          onImportClick={async (playlists) => {\n            mixpanel.track(\"importPlaylists\", {\n              event_category: \"sidebarConfig\",\n              event_label: \"importPlaylists\",\n              value: playlists.length,\n            });\n            setLoading(true);\n            for (const playlist of playlists) {\n              await playlistStore.addPlaylistFromBplistData(playlist.data);\n            }\n            setLoading(false);\n            toaster.success(\n              `Successfully imported ${playlists.length} playlist${\n                playlists.length === 1 ? \"\" : \"s\"\n              }.`\n            );\n          }}\n        />\n\n        <Button\n          isLoading={exporting}\n          onClick={async () => {\n            mixpanel.track(\"exportPlaylists\", {\n              event_category: \"sidebarConfig\",\n              event_label: \"exportPlaylists\",\n            });\n            setExporting(true);\n            const zip = new JSZip();\n            playlistStore.playlists.forEach((playlist, idx) => {\n              zip.file(\n                `[${idx}]-${playlist.title}.bplist`,\n                JSON.stringify(playlist.asBplistJson())\n              );\n            });\n            const content = await zip.generateAsync({ type: \"blob\" });\n            saveAs(\n              content,\n              `beaterlist-${new Date().toLocaleDateString()}.zip`\n            );\n            setExporting(false);\n          }}\n          marginBottom=\"10px\"\n        >\n          Export all playlists\n        </Button>\n      </div>\n      <div style={{ paddingLeft: 20, paddingRight: 20 }}>\n        <Heading>Playlists Config</Heading>\n        <Checkbox\n          label=\"Horizontal Mode\"\n          checked={horizontalMode}\n          onChange={(e) => {\n            mixpanel.track(\"toggleHorizontalMode\", {\n              event_category: \"sidebarConfig\",\n              event_label: \"toggleHorizontalMode\",\n              value: e.target.checked,\n            });\n            preferences.playlistHorizontalMode = e.target.checked;\n          }}\n        />\n\n        <Heading>Columns To Show</Heading>\n        {Object.keys(preferences.playlistColumnsToShow).map((key) => (\n          <Checkbox\n            key={key}\n            label={camelCaseToWords(key)}\n            checked={columnsToShow[key]}\n            onChange={(e) => {\n              mixpanel.track(\"columnsToShow\", {\n                event_category: \"sidebarConfig\",\n                event_label: \"columnsToShow\",\n                value: JSON.stringify(columnsToShow),\n              });\n              preferences.setPlaylistColumnToShow(key, e.target.checked);\n            }}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default observer(Sidebar);\n","import { useState } from \"react\";\nimport {\n  Pane,\n  Text,\n  HelpIcon,\n  SideSheet,\n  Heading,\n  Paragraph,\n} from \"evergreen-ui\";\nimport mixpanel from \"mixpanel-browser\";\nimport { observer } from \"mobx-react-lite\"; // may not need it\n\nexport const Navbar = () => {\n  const [openHelp, setOpenHelp] = useState(false);\n  return (\n    <Pane\n      width=\"100%\"\n      height=\"100px\"\n      display=\"flex\"\n      flexDirection=\"column\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      paddingLeft=\"20px\"\n      paddingRight=\"20px\"\n      paddingTop=\"10px\"\n      paddingBottom=\"10px\"\n      background=\"linear-gradient(45deg, #f03030 0%, #309eff 80%)\"\n    >\n      <Heading color=\"white\" size={900}>\n        BeaterList{\" \"}\n        <HelpIcon\n          color=\"white\"\n          onClick={() => {\n            mixpanel.track(\"toggleHelp\", {\n              event_category: \"sidebarConfig\",\n              event_label: \"toggleHelp\",\n              value: !openHelp,\n            });\n            setOpenHelp(!openHelp);\n          }}\n        />\n      </Heading>\n      <Text color=\"white\">\n        by{\" \"}\n        <a\n          href=\"https://zexuan.tk/projects/#beaterlist\"\n          rel=\"noopener noreferrer\"\n          target=\"blank\"\n          style={{ color: \"white\" }}\n        >\n          zexurge\n        </a>\n      </Text>\n      <SideSheet\n        isShown={openHelp}\n        onCloseComplete={() => {\n          mixpanel.track(\"closeHelp\", {\n            event_category: \"sidebarConfig\",\n            event_label: \"closeHelp\",\n          });\n          setOpenHelp(false);\n        }}\n      >\n        <Pane margin={40}>\n          <Heading>Things to know</Heading>\n          <Paragraph marginTop={10}>\n            Any changes you make will be saved automatically, so you don't have\n            to worry about losing data when refreshing. (if it happens, let me\n            know so I can fix the bug)\n          </Paragraph>\n          <Paragraph marginTop={10}>\n            ALL of the data here is stored locally in your browser. This means\n            that if there are any updates to this site, or if you are using\n            incognito mode, or clear the browser data, ALL of the data will be\n            lost!\n          </Paragraph>\n          <Paragraph marginTop={10}>\n            If you run into issues (crashing/white out) when importing multiple\n            playlists, try importing them in smaller batches. Clear the browser\n            data to resolve the issue. BeatSaver APIs need to be rate limited so\n            we can't retrieve too much data too quickly from them :(\n          </Paragraph>\n          <Paragraph marginTop={10}>So, do backup your data often :)</Paragraph>\n\n          <Heading marginTop={20}>How to use</Heading>\n          <Paragraph marginTop={10}>\n            You can start by creating an empty playlist on the sidebar on the\n            left, or import existing .bplist files or .json files from your\n            Playlists folder to load your playlists.\n          </Paragraph>\n          <Paragraph marginTop={10}>\n            You can then start to add new songs (by key) to the playlists\n            directly, re-order them by drag-and-dropping them around. The songs\n            can also be moved between playlists.\n          </Paragraph>\n          <Paragraph marginTop={10}>\n            You can also reorder the playlists themselves by dragging them\n            (though the d-n-d UI is still a bit buggy for now).\n          </Paragraph>\n\n          <Heading marginTop={20}>BeatSaver browser</Heading>\n          <Paragraph marginTop={10}>\n            I have integrated a BeatSaver browser here, so you can browse for\n            songs here and drag-and-drop them directly to your playlists! I have\n            also setup a simple preview song functionality so you can quickly\n            find and add songs you like.\n          </Paragraph>\n\n          <Heading marginTop={20}>Exporting playlists</Heading>\n          <Paragraph marginTop={10}>\n            You can download each playlist individually by clicking the save\n            icon at the top of each playlist. Or, just export them all in a .zip\n            file using the 'Export all playlists' button.\n          </Paragraph>\n          <Paragraph marginTop={10}>\n            You can then just dump the files into the Playlists folder, and\n            refresh the playlists in game, or import them individually using\n            ModAssistant (or via BMBF/Playlist Editor Pro for Quest)\n          </Paragraph>\n        </Pane>\n      </SideSheet>\n    </Pane>\n  );\n};\nexport default observer(Navbar);\n","import { useContext } from \"react\";\nimport { observer } from \"mobx-react-lite\";\nimport { DragDropContext } from \"react-beautiful-dnd\";\n\nimport { toaster } from \"evergreen-ui\";\nimport PlaylistsContainer from \"./components/PlaylistsContainer\";\nimport BeatSaverBrowser from \"./components/BeatSaverBrowser/\";\nimport { UserPreferencesContext } from \"./stores/preferences\";\nimport Sidebar from \"./components/Sidebar\";\nimport TopNavbar from \"./components/TopNavbar\";\n\nimport { onDragEnd } from \"./controllers/dragAndDrop\";\n\nimport background from \"./assets/background/tile.png\";\n\nconst App = () => {\n  const preferences = useContext(UserPreferencesContext);\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        height: \"100vh\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        border: \"default\",\n        background: `url(${background})`,\n        backgroundRepeat: \"repeat\",\n        backgroundSize: \"200px 200px\",\n      }}\n    >\n      <div\n        style={{\n          width: \"100%\",\n          flexDirection: \"row\",\n          display: \"flex\",\n        }}\n      >\n        <div style={{ minWidth: 250 }}>\n          <TopNavbar />\n          <Sidebar />\n        </div>\n\n        <DragDropContext\n          onDragEnd={(props) => {\n            try {\n              onDragEnd(props);\n            } catch (err) {\n              console.error(err);\n              toaster.danger(err.message);\n            }\n          }}\n        >\n          {preferences.showBeatSaverBrowser && <BeatSaverBrowser />}\n          <PlaylistsContainer />\n        </DragDropContext>\n      </div>\n    </div>\n  );\n};\n\nexport default observer(App);\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKsUExURX+cspK57JjC/oms0W+Gg2+GhISkwZnD/5O67oepzHWOlYWmxJjA+nuWpnGHh3aPl3+etHSOk5fB+5W99Ianx36br3uWpY604JjB/HuXpnCHhnuXqJG46ZG353uWpIirzoyx2pa/+JjC/ZW983KJi3WNko6z33CGhXaPmHeQmoyv2HOLjH+csYCft32brYCftneRm3WQlo+14nSLjnKKjZa/95C25ZO67XiSnISlw4+04pfA+pa+9oSjv3GJinqWpZa/9o2y3XWPlnCHhXaQmJC15JS88Yqt04qt1HuXp3WOloOjv3WNlJS88HKLjoGgunSNkXeRmpW98oSkwJO773WOlH6brXqWpH2arpC25nGJiYKguZW+9XiSnYyw2YGguHePmIKivXGIiXqVoXGGhoepy5S88pK564KivIiqznqVpHKIiXyYq5a/+Y+145S78IiqzXCHh5fA+Yuv13aQl36bsIirz3mToJK67YeqzHKKjHyYqn2cr4yw2HqUoXeSnG+GhZO674CftX+dtIKhu3SMkYOivYeoyYiqzIWmxYWlw3GGhXyYqYuu1nOKjHmUoIGfuJO57IanxnOMjpK46niSm3OLjniTnXiRm3eRmHGHhX2Zq4amx4anyH2arXSNkomrz3SLkHOMkICetX+ds4+04H2arICetIeqzXmUoYWlxHaOlXSNk4+04XiTno6z4JbA+ZS78Yqu1Y604XSNlHKLjHyZq2+HhXmTnnCFg3+dsniTn4+15JC35nOLj3eRnJG36Iipy5K56oCds3yYqIWlwnmVope/+IOivpG46I2y3naQmoipzX2YqoWmxn6cr3KKi5G35n+bsJG46pfC/HyZqo604oGftnuWo4qt0neQmXWPlYWlxXaQmY+z4HOJjJK67ISlxHGHhnqVo7pn+o0AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAXZSURBVHhe7dz7X9NVHMfxL99dzhgBOmaNEGqMuIlB1FgwzEsiVJhRCFJA4tSRlWx01QpNRQtFK+nqjYhKirTSkqjM7F52v99v/0jf73aAwbZ+OufDOY/H5/XT9j0/PR/7bo/vw4e8FSVBNRhNZkJUImGWRGvSWckpqTNmKgk2kmY3zrLRE7nSHGef41DTU87NUGaTzKzzzndm0yOpciVacy7IdRI1PS9fKSjMmlMk531FLHMvLC65qFSXpCgpF19SRK9LlltVyzzupEvDEiU9bwY9kCy3obzClk28VKKodnogW5XzLptv1r7bVKLQy7K1QCULF12+eH7VEiqRFOKprlHVxLwrMq68qiIk8cgJ8dhrzUvI0uKra5ZdU2e41pt0nZy3Vn3i8oZSByHVjSuaSq433VCovZYR0mywtrTaSCUhN+bXrWxsW6X/XskIUat9q9es9bff5HCsu/mWW+vX6xflg1R2FLoDvqC5eOYKd+dtt9+h3VZ60kHq76xLvevuDT7Txnu0593Se5ffF74uG6Q+YO3qWrmpOeDbXH4/ydyydRs9kAziyMzv3r52W+qOzgd8wcDCrDkP0gPpPhFPz85dvbm79zz08CO+vJK9E8+70n1H+np2dj362ONPPJlr9wUjnnelg+iSp5KdO/ILXIHx+0pLPogu2dfr3BXcT394w0kICUkOHDzUT9+GkxGiS54eeIa+oUkJ0SWD9OVYckJIXyt9MZ6kkOgQIloIES2EiBZCRAshooUQ0UKIaCFEtBAiWggRLYSIFkJECyGihRDRQohoIUS0ECJaCBEthIgWQkQLIaKFENFCiGghRLSmBeLxT/oPokyaDojHXvssfcmuaYBojucqmP8lKjxEc2x+3knfsAsc4j1cMpQffIH5lwQa4k5rnVdazUECDLEY9gyWe0kvewkspLL/xdSc4ZcIBwksxFVyJLC+Rn/FXAIJ6fAmHFx19OWmV149poYkLH+DASEd9n3N9kV7248PvDZUrku20gMmAUI6Xz8x0tzT+MbIaNuhAjshZfQ6myBvLdebmuSto1Wq9+2TGR30IqugIG59VSIkId5j/qp3Ck6FrzMLCOLZ/+4CjRKSnN7S3bL7PdZzGUCQzPeDH4xLyj8cHv2I9VMjCETNdva2REhON6lSPv26+j5e88m4pOXESCc9YBkAxNK/uHtgqIxKLJ9+NkoPmMYfYjlj/fyLL79K9ockX2d98y09YBt3iNNvNQ16v/t++AeHJvnxp42cdnF4Qzz2nzcYTeaEZce3a0+KLcGcqX8/yCrOEMuB2oZmg9G0zrr6l1mnOnqPzKUHzOMLqT/8a0OpjRiMxuHfUk/+nvwH2+eryLhCHK3WP2tsxD9b+0za/vq78Z8ifjNePCGWwqX/phQk+NsbdYnZnRbolBISuQ/Hf+eOHyRiHw5i544bJHIfDmLnjhskch8OYueOE2TyPhzEzh0fyJR9OIidOz6QKftwEDt3PCDaw/rkfTh6nWscINH7cPSAa+whMfbhIGIOibUPBxFrSMx9OIhYQ2Luw0HEFhJnHw4ippB4+3AQsYTE3YeDiCEk/j4cRCw/kbj7cBAx/Y70xdmHg4gpRJfE2oeDiC0ktKoWvQ8HEWNISBK1DwcRa4guidqHg4g5RJfw+vfd/4s9JMY+HEQcINMTQkQLIaKFENFCiGghRLQQIloIES2EiBZCRAshooUQ0UKIaCFEtBAiWggRLYSIFkJECyGihRDRQohoIUS0ECJaCBEthIhWFITHPhxEUyFc9uEgmgLhsw8H0WQIp304iCZBeO3DQRQJ4bYPB1EEhN8+HEQTEI77cBBNQDjuw0E0BuG6DwcRhfDdh4OIQvjuw0E0dmtx3YeDSIdw34eDSIPw34eDSIPw34eDSIHYh4NIgdiHA8ilQOzD8c/Sr0Dsw3HPcsaqQOzD8U7fuVMg9uE4F9q5UyD24fgW3rlTIPbhuEZ37hSIfTieje3cKRD7cByjO3f+9v8AaHH23rXZpzsAAAAASUVORK5CYII=\"","import { beatSaverBrowserStore } from \"../stores/beatSaver\";\nimport { playlistStore } from \"../stores/playlists\";\nimport mixpanel from \"mixpanel-browser\";\n\nimport { DROPPABLE_ID as browserDroppableId } from \"../components/BeatSaverBrowser/constants\";\nimport { DROPPABLE_ID as playlistsDroppableId } from \"../components/PlaylistsContainer\";\n\nexport const onDragEnd = ({ destination, source }) => {\n  // the only one that is required\n  if (!destination || !source) {\n    return;\n  }\n  const destIdx = destination.index;\n  const sourceIdx = source.index;\n\n  if (destination.droppableId === source.droppableId && destIdx === sourceIdx) {\n    return;\n  }\n\n  // beat saver browser logic\n  if (source.droppableId === browserDroppableId) {\n    const destinationPlaylist = playlistStore.playlists.find(\n      (p) => p.id === destination.droppableId\n    );\n    const songToAdd = beatSaverBrowserStore.songsList[source.index];\n\n    if (\n      destinationPlaylist.songs.find((song) => song.hash === songToAdd.hash)\n    ) {\n      throw Error(\"Song already exists in this playlist.\");\n    }\n    mixpanel.track(\"addSongFromBrowserToPlaylist\", {\n      event_category: \"beatSaverBrowser\",\n      event_label: \"addSongFromBrowserToPlaylist\",\n    });\n    destinationPlaylist.addSongBySongData(songToAdd, destIdx);\n    playlistStore.savePlaylist(destinationPlaylist);\n    return;\n  }\n\n  // playlists reordering logic\n  if (\n    source.droppableId === playlistsDroppableId &&\n    destination.droppableId === playlistsDroppableId\n  ) {\n    const playlistToMove = playlistStore.playlists[source.index];\n    playlistStore.movePlaylist(playlistToMove, destination.index);\n    mixpanel.track(\"reorderingPlaylists\", {\n      event_category: \"playlist\",\n      event_label: \"reorderingPlaylists\",\n    });\n    return;\n  }\n\n  // droppableId are playlist unique ids\n  const sourcePlaylist = playlistStore.playlists.find(\n    (p) => p.id === source.droppableId\n  );\n  // move within list\n  if (destination.droppableId === source.droppableId) {\n    const songToMove = sourcePlaylist.songs[sourceIdx];\n    sourcePlaylist.removeSong(songToMove); // could be optimized, currently does extra search\n    sourcePlaylist.insertSongAtIdx(songToMove, destIdx);\n\n    playlistStore.savePlaylist(sourcePlaylist);\n    mixpanel.track(\"reorderingSongsWithinPlaylist\", {\n      event_category: \"playlist\",\n      event_label: \"reorderingSongsWithinPlaylist\",\n    });\n  } else {\n    // move across list\n    const destinationPlaylist = playlistStore.playlists.find(\n      (p) => p.id === destination.droppableId\n    );\n    const songToMove = sourcePlaylist.songs[sourceIdx];\n\n    if (\n      destinationPlaylist.songs.find((song) => song.hash === songToMove.hash)\n    ) {\n      throw Error(\"Song already exists in this playlist.\");\n    }\n\n    sourcePlaylist.removeSong(songToMove);\n    destinationPlaylist.insertSongAtIdx(songToMove, destIdx);\n\n    playlistStore.savePlaylist(sourcePlaylist);\n    playlistStore.savePlaylist(destinationPlaylist);\n    mixpanel.track(\"reorderingSongsAcrossPlaylist\", {\n      event_category: \"playlist\",\n      event_label: \"reorderingSongsAcrossPlaylist\",\n    });\n  }\n};\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport { PlaylistStoreContext, playlistStore } from \"./stores/playlists\";\nimport {\n  UserPreferencesContext,\n  userPreferencesStore,\n} from \"./stores/preferences\";\nimport {\n  BeatSaverBrowserStoreContext,\n  beatSaverBrowserStore,\n} from \"./stores/beatSaver\";\nimport mixpanel from \"mixpanel-browser\";\nmixpanel.init(\"00d006716755a1937b5d466c60b20f57\");\n\nReactDOM.render(\n  <React.StrictMode>\n    <PlaylistStoreContext.Provider value={playlistStore}>\n      <BeatSaverBrowserStoreContext.Provider value={beatSaverBrowserStore}>\n        <UserPreferencesContext.Provider value={userPreferencesStore}>\n          <App />\n        </UserPreferencesContext.Provider>\n      </BeatSaverBrowserStoreContext.Provider>\n    </PlaylistStoreContext.Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
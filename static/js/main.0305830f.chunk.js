(this.webpackJsonpbeaterlist=this.webpackJsonpbeaterlist||[]).push([[0],{177:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(20),r=n.n(i),o=(n(89),n(19)),c=n(31),l=n(60),u=n(207),h=n(9),d=n.n(h),f=n(16),p=n(14),j=n(211),b=n(193),v=n(197),g=n(212),x=n(195),y=n(199),O=n(196),m=n(200),w=n(201),S=n(202),k=n(203),C=n(214),_=n(178),B=n(53),P=n(3);var A=Object(o.a)((function(e){var t=e.playlist,n=Object(a.useState)(!1),s=Object(p.a)(n,2),i=s[0],r=s[1],o=Object(a.useState)(!1),c=Object(p.a)(o,2),h=c[0],A=c[1],D=Object(a.useState)(!1),T=Object(p.a)(D,2),I=T[0],L=T[1],H=Object(a.useState)(!1),E=Object(p.a)(H,2),R=E[0],N=E[1],M=Object(a.useState)(!1),z=Object(p.a)(M,2),J=z[0],F=z[1],G=Object(a.useState)(""),U=Object(p.a)(G,2),V=U[0],W=U[1],K=Object(a.useState)(t.title),Z=Object(p.a)(K,2),X=Z[0],$=Z[1],q=Object(a.useState)(t.author),Q=Object(p.a)(q,2),Y=Q[0],ee=Q[1];return Object(P.jsxs)(l.a,{display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:"5px",children:[Object(P.jsx)(j.a,{src:t.image&&"data:image/png;"+t.image,name:t.title,size:50,onClick:function(){!function(e){var t=document.createElement("input");t.type="file",t.accept="image/*",t.multiple=!1,t.addEventListener("change",e),t.dispatchEvent(new MouseEvent("click"))}((function(e){var n="",a=new FileReader,s=e.target.files[0];a.readAsDataURL(s),a.onload=function(){n=a.result,t.image=n,u.a.success("Image saved and updated.")}}))}}),Object(P.jsx)(b.a,{margin:10,children:i?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(v.a,{value:X,width:"100px",onChange:function(e){return $(e.target.value)}})," ","-"," ",Object(P.jsx)(v.a,{value:Y,width:"100px",onChange:function(e){return ee(e.target.value)}}),Object(P.jsx)(g.a,{content:"Save/Confirm",children:Object(P.jsx)(x.a,{icon:y.a,intent:"success",onClick:function(){t.title=X,t.author=Y,r(!1)},marginLeft:"2px"})}),Object(P.jsx)(g.a,{content:"Discard Changes",children:Object(P.jsx)(x.a,{icon:O.a,intent:"danger",onClick:function(){$(t.title),ee(t.author),r(!1)},marginLeft:"2px"})})]}):Object(P.jsxs)(P.Fragment,{children:[t.title," - ",t.author]})}),Object(P.jsxs)("div",{style:{marginLeft:"auto",marginRight:0},children:[Object(P.jsx)(g.a,{content:"Edit Title & Author",children:Object(P.jsx)(x.a,{icon:m.a,onClick:function(){return r(!i)},marginLeft:"2px"})}),Object(P.jsx)(g.a,{content:"Download",children:Object(P.jsx)(x.a,{icon:w.a,marginLeft:"2px",onClick:function(){return function(e){var t=e.asBplistJson(),n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(t))),n.setAttribute("download","".concat(e.title,".bplist")),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}(t)}})}),Object(P.jsx)(g.a,{content:"Delete",children:Object(P.jsx)(x.a,{icon:S.a,marginLeft:"2px",onClick:function(){return A(!0)}})}),Object(P.jsx)(g.a,{content:"Add new song",children:Object(P.jsx)(x.a,{icon:k.a,marginLeft:"2px",onClick:function(){return L(!0)}})})]}),Object(P.jsx)(C.a,{isShown:h,title:"Delete ".concat(t.title,"?"),onCloseComplete:function(){return A(!1)},onConfirm:function(){t.delete(),u.a.success("".concat(t.title," deleted successfully.")),A(!1)},confirmLabel:"Confirm",intent:"danger",children:"This action is irreverisble!"}),Object(P.jsxs)(C.a,{shouldCloseOnOverlayClick:!1,isShown:I,title:"Add new song to ".concat(t.title),onCloseComplete:function(){return L(!1)},onConfirm:Object(f.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(!1),N(!0),e.next=5,t.addSongByKey(V);case 5:n=e.sent,u.a.success("".concat(n.name," added to ").concat(t.title,".")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),F(!0),u.a.danger(e.t0.message);case 13:return e.prev=13,N(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])}))),confirmLabel:"Add",children:[R&&Object(P.jsx)(_.a,{}),Object(P.jsx)(B.a,{children:"Add the song key \ud83d\udd11 you want to add here:"}),Object(P.jsx)(v.a,{marginLeft:"10px",width:"80px",isInvalid:J,value:V,onChange:function(e){return W(e.target.value)}})]})]})})),D=n(18),T=n(216),I=n(206),L=n(204),H=n(24),E=n(25),R=n(21),N=n.n(R),M=n(13),z=["cover","name","songAuthor","levelAuthor","difficulties","downloads","plays","upvotes","downvotes","rating","uploadDate","key","hash","description"],J=new(function(){function e(){Object(H.a)(this,e),this._playlistsHorizontalMode=!1,this._playlistColumnsToShow=void 0,this._showBeatSaverBrowser=!1,Object(M.d)(this),this._playlistsHorizontalMode=N.a.get("playlistHorizontalMode")||!1,this._playlistColumnsToShow=N.a.get("playlistColumnsToShow")||function(){var e={};return z.forEach((function(t){return e[t]=!1})),e}(),this._showBeatSaverBrowser=N.a.get("showBeatSaverBrowser")||!1}return Object(E.a)(e,[{key:"playlistHorizontalMode",get:function(){return this._playlistsHorizontalMode},set:function(e){this._playlistsHorizontalMode=e,N.a.set("playlistHorizontalMode",this._playlistsHorizontalMode)}},{key:"playlistColumnsToShow",get:function(){return this._playlistColumnsToShow},set:function(e){this._playlistColumnsToShow=e,N.a.set("playlistColumnsToShow",this._playlistColumnsToShow)}},{key:"showBeatSaverBrowser",get:function(){return this._showBeatSaverBrowser},set:function(e){this._showBeatSaverBrowser=e,this._showBeatSaverBrowser=N.a.set("showBeatSaverBrowser",this._showBeatSaverBrowser)}},{key:"setPlaylistColumnToShow",value:function(e,t){this._playlistColumnsToShow[e]=t,N.a.set("playlistColumnsToShow",this._playlistColumnsToShow)}},{key:"getPlaylistColumnNamesToShow",value:function(){var e=Object.entries(this._playlistColumnsToShow).filter((function(e){var t=Object(p.a)(e,2);t[0];return t[1]})).map((function(e){var t=Object(p.a)(e,2),n=t[0];t[1];return n}));return 0===e.length?Object.keys(this._playlistColumnsToShow):e}}]),e}()),F=Object(a.createContext)(J),G=function(e){var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},U={easy:{text:"EZ",color:"green"},normal:{text:"N",color:"blue"},hard:{text:"H",color:"yellow"},expert:{text:"E",color:"red"},expertPlus:{text:"E+",color:"purple"}},V=function(e,t){switch(e){case"difficulties":return Object.entries(t.difficulties).filter((function(e){var t=Object(p.a)(e,2);t[0];return t[1]})).map((function(e){var t=Object(p.a)(e,2),n=t[0];t[1];return n})).join(",")}if(e in t)return t[e]},W=function(e){var t={flexBasis:120,flexGrow:0,flexShrink:0};return"description"===e?t={flexBasis:600,flexGrow:0,flexShrink:0}:"cover"===e?t={flexBasis:60,flexGrow:0,flexShrink:0}:"hash"===e?t={flexBasis:300,flexGrow:0,flexShrink:0}:["downloads","plays","upvotes","downvotes","rating","key"].includes(e)&&(t={flexBasis:72,flexGrow:0,flexShrink:0}),t},K=function(e,t){return"cover"===e?Object(P.jsx)(I.a.Cell,Object(D.a)(Object(D.a)({},W(e)),{},{children:Object(P.jsx)(j.a,{src:t.coverURL,size:40})}),e):"difficulties"===e?Object(P.jsx)(I.a.Cell,Object(D.a)(Object(D.a)({},W(e)),{},{children:Object.entries(t.difficulties).filter((function(e){var t=Object(p.a)(e,2);t[0];return t[1]})).map((function(e){var t=Object(p.a)(e,2),n=t[0];t[1];return n})).sort((function(e,t){var n=Object.keys(U);return n.indexOf(e)-n.indexOf(t)})).map((function(e){return function(e){if(e in U){var t=U[e],n=t.text,a=t.color;return Object(P.jsx)(T.a,{color:a,children:n},e)}console.error("missing difficulty key: ",e)}(e)}))}),e):Object(P.jsx)(I.a.TextCell,Object(D.a)(Object(D.a)({},W(e)),{},{children:V(e,t)}),e)},Z=function(e){switch(e){case"upvotes":return"\ud83d\udc4d";case"downvotes":return"\ud83d\udc4e";case"downloads":return"\ud83d\udcbe";case"plays":return"\u25b6\ufe0f";case"rating":return"\ud83d\udcaf";case"key":return"\ud83d\udd11";default:return G(e)}},X=function(e){var t=e.idx,n=e.playlistId,s=e.song,i=e.onRemoveSongClick,r=Object(a.useContext)(F).getPlaylistColumnNamesToShow();return Object(P.jsx)(c.b,{draggableId:"".concat(n,"-").concat(s.hash),index:t,children:function(e){return Object(P.jsxs)(I.a.Row,Object(D.a)(Object(D.a)(Object(D.a)({isSelectable:!0,height:42,ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:[Object(P.jsx)(I.a.Cell,{flexBasis:40,flexGrow:0,flexShrink:0,children:Object(P.jsx)(L.a,{})}),r.map((function(e){return K(e,s)})),Object(P.jsx)(I.a.Cell,{flexBasis:35,flexGrow:0,flexShrink:0,marginRight:0,marginLeft:"auto",children:Object(P.jsx)(S.a,{onClick:function(){return i(s)}})})]}),s.hash)}},s.hash)},$=Object(o.a)((function(e){var t=e.playlist,n=Object(a.useContext)(F).getPlaylistColumnNamesToShow(),s=Object(a.useState)(null),i=Object(p.a)(s,2),r=i[0],o=i[1];return Object(P.jsxs)(I.a,{minWidth:"300px",overflowX:"scroll",children:[Object(P.jsxs)(I.a.Head,{height:42,children:[Object(P.jsx)(I.a.HeaderCell,{flexBasis:40,flexGrow:0}),n.map((function(e){return Object(P.jsx)(I.a.TextHeaderCell,Object(D.a)(Object(D.a)({},W(e)),{},{children:Z(e)}),e)})),Object(P.jsx)(I.a.HeaderCell,{flexBasis:35,flexGrow:0,flexShrink:0,marginRight:0,marginLeft:"auto"})]}),Object(P.jsx)(I.a.Body,{overflow:"visible",children:Object(P.jsx)(c.c,{droppableId:t.id,children:function(e,n){return Object(P.jsxs)("div",{ref:e.innerRef,style:{minHeight:"40px"},children:[t.songs.map((function(e,n){return Object(P.jsx)(X,{idx:n,playlistId:t.id,song:e,onRemoveSongClick:function(e){return o(e)}},e.hash)})),e.placeholder]})}},t.id)}),Object(P.jsx)(C.a,{isShown:!!r,title:"Delete ".concat(null===r||void 0===r?void 0:r.name," from ").concat(t.title,"?"),onCloseComplete:function(){return o(null)},onConfirm:function(){t.removeSong(r),o(null),u.a.success("".concat(r.name," deleted from ").concat(t.title,"."))},confirmLabel:"Confirm",intent:"danger",children:"This action is irreverisble!"})]})})),q=Object(o.a)((function(e){var t=e.playlist;return Object(P.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:20},children:[Object(P.jsx)(A,{playlist:t}),Object(P.jsx)($,{playlist:t})]})})),Q=n(51),Y=n(210),ee=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://beatsaver.com/api/maps/by-hash/".concat(t));case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://beatsaver.com/api/maps/detail/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"hot",e.next=3,fetch("https://beatsaver.com/api/maps/".concat(n,"/").concat(t));case 3:return e.abrupt("return",e.sent.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=new(function(){function e(){var t=this;Object(H.a)(this,e),this._songsList=[],this.fetchSongs=function(){var e=Object(f.a)(d.a.mark((function e(n,a){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(n,a);case 2:s=e.sent,console.log(s),t.songsList=s.docs;case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Object(M.d)(this)}return Object(E.a)(e,[{key:"songsList",get:function(){return this._songsList},set:function(e){this._songsList=e}}]),e}()),se=Object(a.createContext)(ae),ie=new(function(){function e(){var t;Object(H.a)(this,e),this.songCache=null,this.songCache=null!==(t=N.a.get("songCache"))&&void 0!==t?t:{}}return Object(E.a)(e,[{key:"manualAddSongData",value:function(e){this.songCache[e.hash]=e,N.a.set("songCache",this.songCache)}},{key:"retrieveSongData",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t in this.songCache){e.next=5;break}return e.next=3,ee(t);case 3:n=e.sent,this.songCache[t]=n;case 5:N.a.set("songCache",this.songCache);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveMultipleSongData",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a,s,i,r,o,c=this,l=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.length>1&&void 0!==l[1]?l[1]:100,a=t.filter((function(e){return!(e in c.songCache)})),console.log("getting hashes",a),s=Object(Q.a)(a),e.prev=4,s.s();case 6:if((i=s.n()).done){e.next=17;break}return r=i.value,console.log("getting from beat-saver server ",r),e.next=11,ee(r);case 11:return o=e.sent,e.next=14,new Promise((function(e){return setTimeout(e,n)}));case 14:this.songCache[r]=o;case 15:e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),s.e(e.t0);case 22:return e.prev=22,s.f(),e.finish(22);case 25:N.a.set("songCache",this.songCache);case 26:case"end":return e.stop()}}),e,this,[[4,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getSongDataByHash",value:function(e){return e in this.songCache||this.retrieveSongData(e),this.songCache[e]}}]),e}()),re=function(){function e(t){Object(H.a)(this,e),this._hash=null,this.beatSaverSongObject=void 0,this._hash=t.hash,this.beatSaverSongObject=ie.getSongDataByHash(this.hash)}return Object(E.a)(e,[{key:"hash",get:function(){return this._hash}},{key:"coverURL",get:function(){var e;return"https://beatsaver.com"+(null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.coverURL)}},{key:"name",get:function(){var e;return null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.metadata.songName}},{key:"songAuthor",get:function(){var e;return null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.metadata.songAuthorName}},{key:"levelAuthor",get:function(){var e;return null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.metadata.levelAuthorName}},{key:"difficulties",get:function(){var e;return null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.metadata.difficulties}},{key:"description",get:function(){var e;return null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.description}},{key:"downloads",get:function(){var e;return null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.stats.downloads}},{key:"plays",get:function(){var e;return null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.stats.plays}},{key:"upvotes",get:function(){var e;return null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.stats.upVotes}},{key:"downvotes",get:function(){var e;return null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.stats.downVotes}},{key:"rating",get:function(){var e,t;return Number.parseFloat(null!==(e=100*(null===(t=this.beatSaverSongObject)||void 0===t?void 0:t.stats.rating))&&void 0!==e?e:0).toPrecision(2)}},{key:"uploadDate",get:function(){var e;return new Date(null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.uploaded).toLocaleDateString()}},{key:"key",get:function(){var e;return null===(e=this.beatSaverSongObject)||void 0===e?void 0:e.key}},{key:"asJson",value:function(){return{hash:this.hash}}},{key:"asBplistJson",value:function(){return{hash:this.hash,levelid:"custom_level_".concat(this.hash),songName:this.beatSaverSongObject.metadata.name,levelAuthorName:this.beatSaverSongObject.metadata.levelAuthorName,difficulties:this.beatSaverSongObject.metadata.characteristics.flatMap((function(e){return Object.entries(e.difficulties).filter((function(e){var t=Object(p.a)(e,2);t[0];return null!==t[1]})).map((function(t){var n=Object(p.a)(t,2),a=n[0];n[1];return{characteristic:e.name,name:a}}))}))}}}]),e}(),oe=function(){function e(t,n){Object(H.a)(this,e),this._id=null,this._image=null,this._title="",this._author="",this._songs=[],this.store=void 0,Object(M.d)(this),this._id=t.id,this._image=t.image,this._title=t.title,this._author=t.author,this._songs=t.songs.map((function(e){return new re(e)})),this.store=n}return Object(E.a)(e,[{key:"id",get:function(){return this._id}},{key:"image",get:function(){return this._image},set:function(e){this._image=e,this.store.saveAllPlaylists()}},{key:"title",get:function(){return this._title},set:function(e){this._title=e,this.store.saveAllPlaylists()}},{key:"author",get:function(){return this._author},set:function(e){this._author=e,this.store.saveAllPlaylists()}},{key:"songs",get:function(){return this._songs},set:function(e){this._songs=e,this.store.saveAllPlaylists()}},{key:"delete",value:function(){this.store.deletePlaylist(this)}},{key:"removeSong",value:function(e){var t=this._songs.indexOf(e);this._songs.splice(t,1)}},{key:"insertSongAtIdx",value:function(e,t){this._songs.splice(t,0,e)}},{key:"addSongByKey",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te(t);case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),Error("Could not retreive song with key: ".concat(t));case 12:if(!this._songs.find((function(e){return e.hash===n.hash}))){e.next=15;break}throw Error("Song already exists in playlist.");case 15:return ie.manualAddSongData(n),this._songs.push(new re({hash:n.hash})),this.store.saveAllPlaylists(),e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addSongBySongData",value:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:void 0,a=t.hash,void 0===n&&(n=this._songs.length),e.prev=3,!this._songs.find((function(e){return e.hash===a}))){e.next=6;break}return e.abrupt("return");case 6:ie.manualAddSongData(t),this._songs.splice(n,0,new re({hash:a})),this.store.saveAllPlaylists(),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(3),e.t0;case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"asJson",value:function(){return{id:this._id,image:this.image,title:this.title,author:this.author,songs:this.songs.map((function(e){return e.asJson()}))}}},{key:"asBplistJson",value:function(){return{image:this.image,playlistTitle:this.title,playlistAuthor:this.author,songs:this.songs.map((function(e){return e.asBplistJson()}))}}}]),e}(),ce=new(function(){function e(){var t=this;Object(H.a)(this,e),this._playlists=[],this.addPlaylistFromBplistData=function(){var e=Object(f.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.retrieveMultipleSongData(n.songs.map((function(e){return e.hash})));case 2:a=new oe({id:t.getNewId(),image:n.image,title:n.playlistTitle,author:n.playlistAuthor,songs:n.songs},t),t.appendPlaylist(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(M.d)(this);var n=N.a.get("playlists");if(n){var a,s=[],i=Object(Q.a)(n);try{for(i.s();!(a=i.n()).done;){var r=a.value;s.push(new oe(r,this))}}catch(o){i.e(o)}finally{i.f()}this._playlists=s}}return Object(E.a)(e,[{key:"playlists",get:function(){return this._playlists}},{key:"getNewId",value:function(){for(var e=[this._playlists.map((function(e){return e.id}))],t=Object(Y.a)();e.includes(t);)t=Object(Y.a)();return t}},{key:"createNewPlaylist",value:function(){var e=new oe({id:this.getNewId(),image:null,title:"New Playlist",author:"Beaterlist",songs:[]},this);this.appendPlaylist(e)}},{key:"appendPlaylist",value:function(e){this._playlists.push(e),this.saveAllPlaylists()}},{key:"deletePlaylist",value:function(e){var t=this._playlists.indexOf(e);this._playlists.splice(t,1),this.saveAllPlaylists()}},{key:"movePlaylist",value:function(e,t){this._playlists.splice(this._playlists.indexOf(e),1),this._playlists.splice(t,0,e),this.saveAllPlaylists()}},{key:"saveAllPlaylists",value:function(){var e=this._playlists.map((function(e){return e.asJson()}));N.a.set("playlists",e)}}]),e}()),le=Object(a.createContext)(ce),ue=Object(o.a)((function(e){var t=e.userPreferences,n=e.playlistStore;return Object(P.jsx)("div",{style:{width:t.playlistHorizontalMode?"100%":"50%",height:"80vh",display:"flex",flexDirection:t.playlistHorizontalMode?"row":"column",border:"default"},children:n.playlists.map((function(e,t){return Object(P.jsx)(q,{playlistKey:"".concat(e.title,"|").concat(t),playlist:e},"".concat(e.title,"|").concat(t))}))})})),he=function(){var e=Object(a.useContext)(F),t=Object(a.useContext)(le);return Object(P.jsx)(ue,{userPreferences:e,playlistStore:t})},de=n(42),fe=Object(o.a)((function(){var e=Object(a.useState)(0),t=Object(p.a)(e,2),n=t[0],s=(t[1],Object(a.useContext)(se)),i=s.songsList;return Object(a.useEffect)((function(){return s.fetchSongs(n,"plays")}),[n]),Object(P.jsxs)(I.a,{width:"200px",children:[Object(P.jsx)(de.a,{onClick:s.fetchSongs,children:"Load"}),Object(P.jsxs)(I.a.Head,{height:42,children:[Object(P.jsx)(I.a.HeaderCell,{flexBasis:40,flexGrow:0}),Object(P.jsx)(I.a.HeaderCell,{flexBasis:60,flexGrow:0,children:"Cover"})]}),Object(P.jsx)(c.c,{droppableId:"BEAT_SAVER_BROWSER",isDropDisabled:!0,children:function(e,t){return Object(P.jsxs)(I.a.Body,{display:"flex",flexDirection:"column",ref:e.innerRef,children:[i.map((function(e,t){return Object(P.jsx)(c.b,{draggableId:"browser-".concat(e.hash),index:t,children:function(t,n){return Object(P.jsx)(I.a.Row,Object(D.a)(Object(D.a)(Object(D.a)({height:40,ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:Object(P.jsx)(I.a.TextCell,{children:e.name})}),e.hash)}},e.hash)})),e.placeholder]})}})]})})),pe=n(205),je=n(82),be=Object(o.a)((function(e){var t=e.onImportClick,n=Object(je.a)(e,["onImportClick"]);return Object(P.jsx)(de.a,Object(D.a)(Object(D.a)({onClick:function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("multiple",!0),e.setAttribute("accept",".bplist,.json"),e.addEventListener("change",function(){var e=Object(f.a)(d.a.mark((function e(n){var a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.values(n.target.files),e.next=3,Promise.all(a.map(function(){var e=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.name.split(".")[1],e.t1=JSON,e.next=4,t.text();case 4:return e.t2=e.sent,e.t3=e.t1.parse.call(e.t1,e.t2),e.abrupt("return",{type:e.t0,data:e.t3});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:s=e.sent,t(s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},n),{},{children:"Import playlist(s)"}))})),ve=Object(o.a)((function(){var e=Object(a.useContext)(F),t=e.playlistHorizontalMode,n=e.playlistColumnsToShow,s=Object(a.useContext)(le);return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(P.jsx)(de.a,{onClick:function(){s.createNewPlaylist(),u.a.success("New Playlist created.")},marginBottom:"10px",children:"Add new playlist"}),Object(P.jsx)(be,{marginBottom:"10px",onImportClick:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return s.addPlaylistFromBplistData(e.data)})),e.next=3,Promise.all(n);case 3:a=e.sent,u.a.success("Successfully imported ".concat(a.length," playlist").concat(1===a.length?"":"s","."));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(P.jsx)(de.a,{onClick:function(){e.showBeatSaverBrowser=!e.showBeatSaverBrowser},marginBottom:"10px",children:e.showBeatSaverBrowser?"Hide BeatSaver browser":"Show BeatSaver browser"})," "]}),Object(P.jsx)(b.a,{children:"Playlists Config"}),Object(P.jsx)(pe.a,{label:"Horizontal Mode",checked:t,onChange:function(t){e.playlistHorizontalMode=t.target.checked}}),Object(P.jsx)(b.a,{children:"Columns To Show"}),Object.keys(e.playlistColumnsToShow).map((function(t){return Object(P.jsx)(pe.a,{label:G(t),checked:n[t],onChange:function(n){return e.setPlaylistColumnToShow(t,n.target.checked)}},t)}))]})})),ge=Object(o.a)((function(){return Object(P.jsx)(l.a,{width:"100%",height:"50px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingLeft:"20px",paddingRight:"20px",paddingTop:"10px",paddingBottom:"10px",backgroundColor:"#012548",children:Object(P.jsx)(b.a,{color:"white",children:"BeaterList"})})})),xe=Object(o.a)((function(){var e=Object(a.useContext)(F);return Object(P.jsxs)(l.a,{width:"100%",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",border:"default",children:[Object(P.jsx)(ge,{}),Object(P.jsxs)("div",{style:{width:"100%",flexDirection:"row",display:"flex"},children:[Object(P.jsx)(l.a,{minWidth:"300px",padding:30,children:Object(P.jsx)(ve,{})}),Object(P.jsxs)(c.a,{onDragEnd:function(e){try{!function(e){var t=e.destination,n=e.source;if(console.log(t,n),t&&n){var a=t.index,s=n.index;if("BEAT_SAVER_BROWSER"===n.droppableId){var i=ce.playlists.find((function(e){return e.id===t.droppableId})),r=ae.songsList[n.index];return console.log("hiyaya",r.hash),i.addSongBySongData(r,a),void ce.saveAllPlaylists()}if("playlists"!==n.droppableId||"playlists"!==t.droppableId){if(t.droppableId!==n.droppableId||a!==s){var o=ce.playlists.find((function(e){return e.id===n.droppableId}));if(t.droppableId===n.droppableId){var c=o.songs[s];o.removeSong(c),o.insertSongAtIdx(c,a),console.log("moving within",c,s,a)}else{var l=ce.playlists.find((function(e){return e.id===t.droppableId})),u=o.songs[s];if(l.songs.find((function(e){return e.hash===u.hash})))throw Error("Song already exists in this playlist.");o.removeSong(u),l.insertSongAtIdx(u,a)}ce.saveAllPlaylists()}}else{var h=ce.playlists[n.index];ce.movePlaylist(h,t.index)}}}(e)}catch(t){console.error(t),u.a.danger(t.message)}},children:[e.showBeatSaverBrowser&&Object(P.jsx)(fe,{}),Object(P.jsx)(he,{})]})]})]})})),ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,217)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),i(e),r(e)}))};r.a.render(Object(P.jsx)(s.a.StrictMode,{children:Object(P.jsx)(le.Provider,{value:ce,children:Object(P.jsx)(se.Provider,{value:ae,children:Object(P.jsx)(F.Provider,{value:J,children:Object(P.jsx)(xe,{})})})})}),document.getElementById("root")),ye()},89:function(e,t,n){}},[[177,1,2]]]);
//# sourceMappingURL=main.0305830f.chunk.js.map